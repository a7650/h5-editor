(function(t){function e(e){for(var i,a,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"055a":function(t,e,n){(function(i){var o,r,a,s,c=n("d15b").default;n("83a0"),n("31c9"),n("f6a2"),n("d9dd"),n("65ff"),n("3a76"),n("4c4d"),n("2f90"),n("0a53"),n("6135"),n("243f"),n("c7ae"),n("aa88"),n("0029"),n("e90a"),n("dfdd"),n("9135"),n("92bd"),n("cc6d"),n("500f"),function(n){"object"===c(e)&&"undefined"!==typeof t?t.exports=n():(r=[],o=n,a="function"===typeof o?o.apply(e,r):o,void 0===a||(t.exports=a))}((function(){var t;return function t(e,n,i){function o(a,c){if(!n[a]){if(!e[a]){var l="function"===typeof s&&s;if(!c&&l)return s(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};e[a][0].call(d.exports,(function(t){var n=e[a][1][t];return o(n||t)}),d,d.exports,t,e,n,i)}return n[a].exports}for(var r="function"===typeof s&&s,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,n,o){(function(e){!function(i){function r(t){throw new RangeError(B[t])}function a(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function s(t,e){var n=t.split("@"),i="";n.length>1&&(i=n[0]+"@",t=n[1]),t=t.replace(P,".");var o=t.split("."),r=a(o,e).join(".");return i+r}function l(t){for(var e,n,i=[],o=0,r=t.length;o<r;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<r?(n=t.charCodeAt(o++),56320==(64512&n)?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),o--)):i.push(e);return i}function u(t){return a(t,(function(t){var e="";return t>65535&&(t-=65536,e+=z(t>>>10&1023|55296),t=56320|1023&t),e+z(t)})).join("")}function d(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:C}function h(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,n){var i=0;for(t=n?D(t/E):t>>1,t+=D(t/e);t>A*I>>1;i+=C)t=D(t/A);return D(i+(A+1)*t/(t+j))}function p(t){var e,n,i,o,a,s,c,l,h,p,m=[],g=t.length,v=0,b=T,y=_;for(n=t.lastIndexOf(L),n<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&r("not-basic"),m.push(t.charCodeAt(i));for(o=n>0?n+1:0;o<g;){for(a=v,s=1,c=C;o>=g&&r("invalid-input"),l=d(t.charCodeAt(o++)),(l>=C||l>D((S-v)/s))&&r("overflow"),v+=l*s,h=c<=y?O:c>=y+I?I:c-y,!(l<h);c+=C)p=C-h,s>D(S/p)&&r("overflow"),s*=p;e=m.length+1,y=f(v-a,e,0==a),D(v/e)>S-b&&r("overflow"),b+=D(v/e),v%=e,m.splice(v++,0,b)}return u(m)}function m(t){var e,n,i,o,a,s,c,u,d,p,m,g,v,b,y,w=[];for(t=l(t),g=t.length,e=T,n=0,a=_,s=0;s<g;++s)m=t[s],m<128&&w.push(z(m));for(i=o=w.length,o&&w.push(L);i<g;){for(c=S,s=0;s<g;++s)m=t[s],m>=e&&m<c&&(c=m);for(v=i+1,c-e>D((S-n)/v)&&r("overflow"),n+=(c-e)*v,e=c,s=0;s<g;++s)if(m=t[s],m<e&&++n>S&&r("overflow"),m==e){for(u=n,d=C;p=d<=a?O:d>=a+I?I:d-a,!(u<p);d+=C)y=u-p,b=C-p,w.push(z(h(p+y%b,0))),u=D(y/b);w.push(z(h(u,0))),a=f(n,v,i==o),n=0,++i}++n,++e}return w.join("")}function g(t){return s(t,(function(t){return R.test(t)?p(t.slice(4).toLowerCase()):t}))}function v(t){return s(t,(function(t){return M.test(t)?"xn--"+m(t):t}))}var b,y,w="object"===c(o)&&o&&!o.nodeType&&o,x="object"===c(n)&&n&&!n.nodeType&&n,k="object"===c(e)&&e;k.global!==k&&k.window!==k&&k.self!==k||(i=k);var S=2147483647,C=36,O=1,I=26,j=38,E=700,_=72,T=128,L="-",R=/^xn--/,M=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=C-O,D=Math.floor,z=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:l,encode:u},decode:p,encode:m,toASCII:v,toUnicode:g},"function"===typeof t&&"object"===c(t.amd)&&t.amd)t("punycode",(function(){return b}));else if(w&&x)if(n.exports==w)x.exports=b;else for(y in b)b.hasOwnProperty(y)&&(w[y]=b[y]);else i.punycode=b}(this)}).call(this,"undefined"!==typeof i?i:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(t,e,n){function i(t,e,n){!t.defaultView||e===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)}function o(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(n){s("Unable to copy canvas content from",t,n)}}function r(t,e){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;)!0!==e&&1===i.nodeType&&"SCRIPT"===i.nodeName||n.appendChild(r(i,e)),i=i.nextSibling;return 1===t.nodeType&&(n._scrollTop=t.scrollTop,n._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?o(t,n):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value)),n}function a(t){if(1===t.nodeType){t.scrollTop=t._scrollTop,t.scrollLeft=t._scrollLeft;for(var e=t.firstChild;e;)a(e),e=e.nextSibling}}var s=t("./log");e.exports=function(t,e,n,o,s,c,l){var u=r(t.documentElement,s.javascriptEnabled),d=e.createElement("iframe");return d.className="html2canvas-container",d.style.visibility="hidden",d.style.position="fixed",d.style.left="-10000px",d.style.top="0px",d.style.border="0",d.width=n,d.height=o,d.scrolling="no",e.body.appendChild(d),new Promise((function(e){var n=d.contentWindow.document;d.contentWindow.onload=d.onload=function(){var t=setInterval((function(){n.body.childNodes.length>0&&(a(n.documentElement),clearInterval(t),"view"===s.type&&(d.contentWindow.scrollTo(c,l),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||d.contentWindow.scrollY===l&&d.contentWindow.scrollX===c||(n.documentElement.style.top=-l+"px",n.documentElement.style.left=-c+"px",n.documentElement.style.position="absolute")),e(d))}),50)},n.open(),n.write("<!DOCTYPE html><html></html>"),i(t,c,l),n.replaceChild(n.adoptNode(u),n.documentElement),n.close()}))}},{"./log":13}],3:[function(t,e,n){function i(t){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}i.prototype.darken=function(t){var e=1-t;return new i([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},i.prototype.isTransparent=function(){return 0===this.a},i.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},i.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),t.length>3&&(this.a=t[3])),Array.isArray(t)};var o=/^#([a-f0-9]{3})$/i;i.prototype.hex3=function(t){var e=null;return null!==(e=t.match(o))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var r=/^#([a-f0-9]{6})$/i;i.prototype.hex6=function(t){var e=null;return null!==(e=t.match(r))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;i.prototype.rgb=function(t){var e=null;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;i.prototype.rgba=function(t){var e=null;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},i.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},i.prototype.namedColor=function(t){t=t.toLowerCase();var e=c[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},i.prototype.isColor=!0;var c={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=i},{}],4:[function(e,n,i){function o(t,e){var n=x++;if(e=e||{},e.logging&&(m.options.logging=!0,m.options.start=Date.now()),e.async="undefined"===typeof e.async||e.async,e.allowTaint="undefined"!==typeof e.allowTaint&&e.allowTaint,e.removeContainer="undefined"===typeof e.removeContainer||e.removeContainer,e.javascriptEnabled="undefined"!==typeof e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout="undefined"===typeof e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"===typeof e.renderer?e.renderer:d,e.strict=!!e.strict,"string"===typeof t){if("string"!==typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var i=null!=e.width?e.width:window.innerWidth,o=null!=e.height?e.height:window.innerHeight;return b(l(t),e.proxy,document,i,o,e).then((function(t){return a(t.contentWindow.document.documentElement,t,e,i,o)}))}var s=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return s.setAttribute(w+n,n),r(s.ownerDocument,e,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,n).then((function(t){return"function"===typeof e.onrendered&&(m("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t}))}function r(t,e,n,i,o){return v(t,t,n,i,e,t.defaultView.pageXOffset,t.defaultView.pageYOffset).then((function(r){m("Document cloned");var s=w+o,c="["+s+"='"+o+"']";t.querySelector(c).removeAttribute(s);var l=r.contentWindow,u=l.document.querySelector(c),d="function"===typeof e.onclone?Promise.resolve(e.onclone(l.document)):Promise.resolve(!0);return d.then((function(){return a(u,r,e,n,i)}))}))}function a(t,e,n,i,o){var r=e.contentWindow,a=new u(r.document),l=new h(n,a),d=y(t),p="view"===n.type?i:d.right+1,g="view"===n.type?o:d.bottom+1,v=new n.renderer(p,g,l,n,document),b=new f(t,v,a,l,n);return b.ready.then((function(){var i;if(m("Finished rendering"),"view"===n.type)i=c(v.canvas,{width:v.canvas.width,height:v.canvas.height,top:0,left:0,x:0,y:0});else if(t===r.document.body||t===r.document.documentElement||null!=n.canvas)i=v.canvas;else if(n.scale){var o={width:null!=n.width?n.width:d.width,height:null!=n.height?n.height:d.height,top:d.top,left:d.left,x:0,y:0},a={};for(var l in o)o.hasOwnProperty(l)&&(a[l]=o[l]*n.scale);i=c(v.canvas,a),i.style.width=o.width+"px",i.style.height=o.height+"px"}else i=c(v.canvas,{width:null!=n.width?n.width:d.width,height:null!=n.height?n.height:d.height,top:d.top,left:d.left,x:0,y:0});return s(e,n),i}))}function s(t,e){e.removeContainer&&(t.parentNode.removeChild(t),m("Cleaned up container"))}function c(t,e){var n=document.createElement("canvas"),i=Math.min(t.width-1,Math.max(0,e.left)),o=Math.min(t.width,Math.max(1,e.left+e.width)),r=Math.min(t.height-1,Math.max(0,e.top)),a=Math.min(t.height,Math.max(1,e.top+e.height));n.width=e.width,n.height=e.height;var s=o-i,c=a-r;return m("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",s,"height:",c),m("Resulting crop with width",e.width,"and height",e.height,"with x",i,"and y",r),n.getContext("2d").drawImage(t,i,r,s,c,e.x,e.y,s,c),n}function l(t){var e=document.createElement("a");return e.href=t,e.href=e.href,e}var u=e("./support"),d=e("./renderers/canvas"),h=e("./imageloader"),f=e("./nodeparser"),p=e("./nodecontainer"),m=e("./log"),g=e("./utils"),v=e("./clone"),b=e("./proxy").loadUrlDocument,y=g.getBounds,w="data-html2canvas-node",x=0;o.CanvasRenderer=d,o.NodeContainer=p,o.log=m,o.utils=g;var k="undefined"===typeof document||"function"!==typeof Object.create||"function"!==typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:o;n.exports=k,"function"===typeof t&&t.amd&&t("html2canvas",[],(function(){return k}))},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e,n){function i(t){if(this.src=t,o("DummyImageContainer for",t),!this.promise||!this.image){o("Initiating DummyImageContainer"),i.prototype.image=new Image;var e=this.image;i.prototype.promise=new Promise((function(t,n){e.onload=t,e.onerror=n,e.src=r(),!0===e.complete&&t(e)}))}}var o=t("./log"),r=t("./utils").smallImage;e.exports=i},{"./log":13,"./utils":26}],6:[function(t,e,n){function i(t,e){var n,i,r=document.createElement("div"),a=document.createElement("img"),s=document.createElement("span"),c="Hidden Text";r.style.visibility="hidden",r.style.fontFamily=t,r.style.fontSize=e,r.style.margin=0,r.style.padding=0,document.body.appendChild(r),a.src=o(),a.width=1,a.height=1,a.style.margin=0,a.style.padding=0,a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode(c)),r.appendChild(s),r.appendChild(a),n=a.offsetTop-s.offsetTop+1,r.removeChild(s),r.appendChild(document.createTextNode(c)),r.style.lineHeight="normal",a.style.verticalAlign="super",i=a.offsetTop-r.offsetTop+1,document.body.removeChild(r),this.baseline=n,this.lineWidth=1,this.middle=i}var o=t("./utils").smallImage;e.exports=i},{"./utils":26}],7:[function(t,e,n){function i(){this.data={}}var o=t("./font");i.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new o(t,e)),this.data[t+"-"+e]},e.exports=i},{"./font":6}],8:[function(t,e,n){function i(e,n,i){this.image=null,this.src=e;var o=this,a=r(e);this.promise=(n?new Promise((function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)})):this.proxyLoad(i.proxy,a,i)).then((function(e){var n=t("./core");return n(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:i.proxy,javascriptEnabled:i.javascriptEnabled,removeContainer:i.removeContainer,allowTaint:i.allowTaint,imageTimeout:i.imageTimeout/2})})).then((function(t){return o.image=t}))}var o=t("./utils"),r=o.getBounds,a=t("./proxy").loadUrlDocument;i.prototype.proxyLoad=function(t,e,n){var i=this.src;return a(i.src,t,i.ownerDocument,e.width,e.height,n)},e.exports=i},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e,n){function i(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}i.TYPES={LINEAR:1,RADIAL:2},i.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=i},{}],10:[function(t,e,n){function i(t,e){this.src=t,this.image=new Image;var n=this;this.tainted=null,this.promise=new Promise((function(i,o){n.image.onload=i,n.image.onerror=o,e&&(n.image.crossOrigin="anonymous"),n.image.src=t,!0===n.image.complete&&i(n.image)}))}e.exports=i},{}],11:[function(t,e,n){function i(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}var o=t("./log"),r=t("./imagecontainer"),a=t("./dummyimagecontainer"),s=t("./proxyimagecontainer"),c=t("./framecontainer"),l=t("./svgcontainer"),u=t("./svgnodecontainer"),d=t("./lineargradientcontainer"),h=t("./webkitgradientcontainer"),f=t("./utils").bind;i.prototype.findImages=function(t){var e=[];return t.reduce((function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t}),[]).forEach(this.addImage(e,this.loadImage),this),e},i.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},i.prototype.addImage=function(t,e){return function(n){n.args.forEach((function(i){this.imageExists(t,i)||(t.splice(0,0,e.call(this,n)),o("Added image #"+t.length,"string"===typeof i?i.substring(0,100):i))}),this)}},i.prototype.hasImageBackground=function(t){return"none"!==t.method},i.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new r(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new r(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new r(e,!0):this.options.proxy?new s(e,this.options.proxy):new a(e):new l(e)}return"linear-gradient"===t.method?new d(t):"gradient"===t.method?new h(t):"svg"===t.method?new u(t.args[0],this.support.svg):"IFRAME"===t.method?new c(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new a(t)},i.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||l.prototype.isInline(t)},i.prototype.imageExists=function(t,e){return t.some((function(t){return t.src===e}))},i.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},i.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},i.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout)["catch"]((function(){var e=new a(t.src);return e.promise.then((function(e){t.image=e}))}))},i.prototype.get=function(t){var e=null;return this.images.some((function(n){return(e=n).src===t}))?e:null},i.prototype.fetch=function(t){return this.images=t.reduce(f(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach((function(t,e){t.promise.then((function(){o("Succesfully loaded image #"+(e+1),t)}),(function(n){o("Failed loading image #"+(e+1),t,n)}))})),this.ready=Promise.all(this.images.map(this.getPromise,this)),o("Finished searching images"),this},i.prototype.timeout=function(t,e){var n,i=Promise.race([t.promise,new Promise((function(i,r){n=setTimeout((function(){o("Timed out loading image",t),r(t)}),e)}))]).then((function(t){return clearTimeout(n),t}));return i["catch"]((function(){clearTimeout(n)})),i},e.exports=i},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e,n){function i(t){o.apply(this,arguments),this.type=o.TYPES.LINEAR;var e=i.REGEXP_DIRECTION.test(t.args[0])||!o.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach((function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,i=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=i,this.y1=n;break;case"center":break;default:var o=.01*parseFloat(t,10);if(isNaN(o))break;0===e?(this.y0=o,this.y1=1-this.y0):(this.x0=o,this.x1=1-this.x0)}}),this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map((function(t){var e=t.match(o.REGEXP_COLORSTOP),n=+e[2],i=0===n?"%":e[3];return{color:new r(e[1]),stop:"%"===i?n/100:null}})),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach((function(t,e){null===t.stop&&this.colorStops.slice(e).some((function(n,i){return null!==n.stop&&(t.stop=(n.stop-this.colorStops[e-1].stop)/(i+1)+this.colorStops[e-1].stop,!0)}),this)}),this)}var o=t("./gradientcontainer"),r=t("./color");i.prototype=Object.create(o.prototype),i.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=i},{"./color":3,"./gradientcontainer":9}],13:[function(t,e,n){var i=function t(){t.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-t.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};i.options={logging:!1},e.exports=i},{}],14:[function(t,e,n){function i(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function o(t){var e=t.options[t.selectedIndex||0];return e&&e.text||""}function r(t){if(t&&"matrix"===t[1])return t[2].split(",").map((function(t){return parseFloat(t.trim())}));if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map((function(t){return parseFloat(t.trim())}));return[e[0],e[1],e[4],e[5],e[12],e[13]]}}function a(t){var e=t[0],n=t[2],i=t[4],o=t[1],r=t[3],a=t[5],s=e*r-n*o,c=[r,-o,-n,e,n*a-i*r,i*o-e*a].map((function(t){return t/s}));return c}function s(t){return-1!==t.toString().indexOf("%")}function c(t){return t.replace("px","")}function l(t){return parseFloat(t)}var u=t("./color"),d=t("./utils"),h=d.getBounds,f=d.parseBackgrounds,p=d.offsetBounds;i.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},i.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},i.prototype.assignStack=function(t){this.stack=t,t.children.push(this)},i.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},i.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},i.prototype.prefixedCss=function(t){var e=["webkit","moz","ms","o"],n=this.css(t);return void 0===n&&e.some((function(e){return n=this.css(e+t.substr(0,1).toUpperCase()+t.substr(1)),void 0!==n}),this),void 0===n?null:n},i.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},i.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},i.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new u(this.css(t)))},i.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},i.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},i.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},i.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=f(this.css("backgroundImage")))},i.prototype.cssList=function(t,e){var n=(this.css(t)||"").split(",");return n=n[e||0]||n[0]||"auto",n=n.trim().split(" "),1===n.length&&(n=[n[0],s(n[0])?"auto":n[0]]),n},i.prototype.parseBackgroundSize=function(t,e,n){var i,o,r=this.cssList("backgroundSize",n);if(s(r[0]))i=t.width*parseFloat(r[0])/100;else{if(/contain|cover/.test(r[0])){var a=t.width/t.height,c=e.width/e.height;return a<c^"contain"===r[0]?{width:t.height*c,height:t.height}:{width:t.width,height:t.width/c}}i=parseInt(r[0],10)}return o="auto"===r[0]&&"auto"===r[1]?e.height:"auto"===r[1]?i/e.width*e.height:s(r[1])?t.height*parseFloat(r[1])/100:parseInt(r[1],10),"auto"===r[0]&&(i=o/e.height*e.width),{width:i,height:o}},i.prototype.parseBackgroundPosition=function(t,e,n,i){var o,r,a=this.cssList("backgroundPosition",n);return o=s(a[0])?(t.width-(i||e).width)*(parseFloat(a[0])/100):parseInt(a[0],10),r="auto"===a[1]?o/e.width*e.height:s(a[1])?(t.height-(i||e).height)*parseFloat(a[1])/100:parseInt(a[1],10),"auto"===a[0]&&(o=r/e.height*e.width),{left:o,top:r}},i.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},i.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var n=t.match(this.TEXT_SHADOW_PROPERTY),i=0;n&&i<n.length;i++){var o=n[i].match(this.TEXT_SHADOW_VALUES);e.push({color:new u(o[0]),offsetX:o[1]?parseFloat(o[1].replace("px","")):0,offsetY:o[2]?parseFloat(o[2].replace("px","")):0,blur:o[3]?o[3].replace("px",""):0})}return e},i.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(c).map(l);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},i.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?r(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},i.prototype.inverseTransform=function(){var t=this.parseTransform();return{origin:t.origin,matrix:a(t.matrix)}},i.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?p(this.node):h(this.node))},i.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},i.prototype.getValue=function(){var t=this.node.value||"";return"SELECT"===this.node.tagName?t=o(this.node):"password"===this.node.type&&(t=Array(t.length+1).join("•")),0===t.length?this.node.placeholder||"":t},i.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,i.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,i.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,i.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=i},{"./color":3,"./utils":26}],15:[function(t,e,n){function i(t,e,n,i,o){H("Starting NodeParser"),this.renderer=e,this.options=o,this.range=null,this.support=n,this.renderQueue=[],this.stack=new G(!0,1,t.ownerDocument,null);var r=new Y(t,null);if(o.background&&e.rectangle(0,0,e.width,e.height,new U(o.background)),t===t.ownerDocument.documentElement){var a=new Y(r.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,a.color("backgroundColor"))}r.visibile=r.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=A([r].concat(this.getChildren(r)).filter((function(t){return t.visible=t.isElementVisible()})).map(this.getPseudoElements,this)),this.fontMetrics=new V,H("Fetched nodes, total:",this.nodes.length),H("Calculate overflow clips"),this.calculateOverflowClips(),H("Start fetching images"),this.images=i.fetch(this.nodes.filter(E)),this.ready=this.images.ready.then(J((function(){return H("Images loaded, starting parsing"),H("Creating stacking contexts"),this.createStackingContexts(),H("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),H("Render queue created with "+this.renderQueue.length+" items"),new Promise(J((function(t){o.async?"function"===typeof o.async?o.async.call(this,this.renderQueue,t):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())}),this))}),this))}function o(t){return t.parent&&t.parent.clip.length}function r(t){return t.replace(/(\-[a-z])/g,(function(t){return t.toUpperCase().replace("-","")}))}function a(){}function s(t,e,n,i){var o={top:e.top+t[0].width/2,right:e.right-t[1].width/2,bottom:e.bottom-t[2].width/2,left:e.left+t[3].width/2};return t.map((function(r,a){if(r.width>0){var s=e.left,c=e.top,l=e.width,u=e.height-t[2].width;switch(a){case 0:u=t[0].width,r.args=d({c1:[s,c],c2:[s+l,c],c3:[s+l-t[1].width,c+u],c4:[s+t[3].width,c+u]},i[0],i[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner),r.pathArgs=h({c1:[o.left,o.top],c2:[o.right,o.top]},i[0],i[1],n.topLeft,n.topRight);break;case 1:s=e.left+e.width-t[1].width,l=t[1].width,r.args=d({c1:[s+l,c],c2:[s+l,c+u+t[2].width],c3:[s,c+u],c4:[s,c+t[0].width]},i[1],i[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner),r.pathArgs=h({c1:[o.right,o.top],c2:[o.right,o.bottom]},i[1],i[2],n.topRight,n.bottomRight);break;case 2:c=c+e.height-t[2].width,u=t[2].width,r.args=d({c1:[s+l,c+u],c2:[s,c+u],c3:[s+t[3].width,c],c4:[s+l-t[3].width,c]},i[2],i[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner),r.pathArgs=h({c1:[o.right,o.bottom],c2:[o.left,o.bottom]},i[2],i[3],n.bottomRight,n.bottomLeft);break;case 3:l=t[3].width,r.args=d({c1:[s,c+u+t[2].width],c2:[s,c],c3:[s+l,c+t[0].width],c4:[s+l,c+u]},i[3],i[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner),r.pathArgs=h({c1:[o.left,o.bottom],c2:[o.left,o.top]},i[3],i[0],n.bottomLeft,n.topLeft)}}return r}))}function c(t,e,n,i){var o=(Math.sqrt(2)-1)/3*4,r=n*o,a=i*o,s=t+n,c=e+i;return{topLeft:u({x:t,y:c},{x:t,y:c-a},{x:s-r,y:e},{x:s,y:e}),topRight:u({x:t,y:e},{x:t+r,y:e},{x:s,y:c-a},{x:s,y:c}),bottomRight:u({x:s,y:e},{x:s,y:e+a},{x:t+r,y:c},{x:t,y:c}),bottomLeft:u({x:s,y:c},{x:s-r,y:c},{x:t,y:e+a},{x:t,y:e})}}function l(t,e,n){var i=t.left,o=t.top,r=t.width,a=t.height,s=e[0][0]<r/2?e[0][0]:r/2,l=e[0][1]<a/2?e[0][1]:a/2,u=e[1][0]<r/2?e[1][0]:r/2,d=e[1][1]<a/2?e[1][1]:a/2,h=e[2][0]<r/2?e[2][0]:r/2,f=e[2][1]<a/2?e[2][1]:a/2,p=e[3][0]<r/2?e[3][0]:r/2,m=e[3][1]<a/2?e[3][1]:a/2,g=r-u,v=a-f,b=r-h,y=a-m;return{topLeft:c(i+n[3].width/2,o+n[0].width/2,Math.max(0,s-n[3].width/2),Math.max(0,l-n[0].width/2)).topLeft.subdivide(.5),topRight:c(i+Math.min(g,r+n[3].width/2),o+n[0].width/2,g>r+n[3].width/2?0:u-n[3].width/2,d-n[0].width/2).topRight.subdivide(.5),bottomRight:c(i+Math.min(b,r-n[3].width/2),o+Math.min(v,a+n[0].width/2),Math.max(0,h-n[1].width/2),f-n[2].width/2).bottomRight.subdivide(.5),bottomLeft:c(i+n[3].width/2,o+y,Math.max(0,p-n[3].width/2),m-n[2].width/2).bottomLeft.subdivide(.5),topLeftOuter:c(i,o,s,l).topLeft.subdivide(.5),topLeftInner:c(i+n[3].width,o+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:c(i+g,o,u,d).topRight.subdivide(.5),topRightInner:c(i+Math.min(g,r+n[3].width),o+n[0].width,g>r+n[3].width?0:u-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:c(i+b,o+v,h,f).bottomRight.subdivide(.5),bottomRightInner:c(i+Math.min(b,r-n[3].width),o+Math.min(v,a+n[0].width),Math.max(0,h-n[1].width),f-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:c(i,o+y,p,m).bottomLeft.subdivide(.5),bottomLeftInner:c(i+n[3].width,o+y,Math.max(0,p-n[3].width),m-n[2].width).bottomLeft.subdivide(.5)}}function u(t,e,n,i){var o=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:i,subdivide:function(r){var a=o(t,e,r),s=o(e,n,r),c=o(n,i,r),l=o(a,s,r),d=o(s,c,r),h=o(l,d,r);return[u(t,a,l,h),u(h,d,c,i)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function d(t,e,n,i,o,r,a){var s=[];return e[0]>0||e[1]>0?(s.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(s.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function h(t,e,n,i,o){var r=[];return e[0]>0||e[1]>0?(r.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(r)):r.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(r.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(r)):r.push(["line",t.c2[0],t.c2[1]]),r}function f(t,e,n,i,o,r,a){e[0]>0||e[1]>0?(t.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(t),i[1].curveTo(t)):t.push(["line",r,a]),(n[0]>0||n[1]>0)&&t.push(["line",o[0].start.x,o[0].start.y])}function p(t){return t.cssInt("zIndex")<0}function m(t){return t.cssInt("zIndex")>0}function g(t){return 0===t.cssInt("zIndex")}function v(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function b(t){return t instanceof G}function y(t){return t.node.data.trim().length>0}function w(t){return/^(normal|none|0px)$/.test(t.parent.css("letterSpacing"))}function x(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map((function(e){var n=t.css("border"+e+"Radius"),i=n.split(" ");return i.length<=1&&(i[1]=i[0]),i.map(M)}))}function k(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function S(t){var e=t.css("position"),n=-1!==["absolute","relative","fixed"].indexOf(e)?t.css("zIndex"):"auto";return"auto"!==n}function C(t){return"static"!==t.css("position")}function O(t){return"none"!==t.css("float")}function I(t){return-1!==["inline-block","inline-table"].indexOf(t.css("display"))}function j(t){var e=this;return function(){return!t.apply(e,arguments)}}function E(t){return t.node.nodeType===Node.ELEMENT_NODE}function _(t){return!0===t.isPseudoElement}function T(t){return t.node.nodeType===Node.TEXT_NODE}function L(t){return function(e,n){return e.cssInt("zIndex")+t.indexOf(e)/t.length-(n.cssInt("zIndex")+t.indexOf(n)/t.length)}}function R(t){return t.getOpacity()<1}function M(t){return parseInt(t,10)}function P(t){return t.width}function B(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function A(t){return[].concat.apply([],t)}function D(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/'|"/)?t.substr(1,t.length-2):t}function z(t){for(var e,n=[],i=0,o=!1;t.length;)N(t[i])===o?(e=t.splice(0,i),e.length&&n.push($.ucs2.encode(e)),o=!o,i=0):i++,i>=t.length&&(e=t.splice(0,i),e.length&&n.push($.ucs2.encode(e)));return n}function N(t){return-1!==[32,13,10,9,45].indexOf(t)}function W(t){return/[^\u0000-\u00ff]/.test(t)}var H=t("./log"),$=t("punycode"),Y=t("./nodecontainer"),X=t("./textcontainer"),F=t("./pseudoelementcontainer"),V=t("./fontmetrics"),U=t("./color"),G=t("./stackingcontext"),q=t("./utils"),J=q.bind,Z=q.getBounds,K=q.parseBackgrounds,Q=q.offsetBounds;i.prototype.calculateOverflowClips=function(){this.nodes.forEach((function(t){if(E(t)){_(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],n=t.parseClip();n&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+n.left,t.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),t.clip=o(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,_(t)&&t.cleanDOM()}else T(t)&&(t.clip=o(t)?t.parent.clip:[]);_(t)||(t.bounds=null)}),this)},i.prototype.asyncRenderer=function(t,e,n){n=n||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():n+20>Date.now()?this.asyncRenderer(t,e,n):setTimeout(J((function(){this.asyncRenderer(t,e)}),this),0)},i.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+F.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+F.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},i.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},i.prototype.createStyles=function(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},i.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(t,":before"),i=this.getPseudoElement(t,":after");n&&e.push(n),i&&e.push(i)}return A(e)},i.prototype.getPseudoElement=function(t,e){var n=t.computedStyle(e);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var i=D(n.content),o="url"===i.substr(0,3),a=document.createElement(o?"img":"html2canvaspseudoelement"),s=new F(a,t,e),c=n.length-1;c>=0;c--){var l=r(n.item(c));a.style[l]=n[l]}if(a.className=F.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+F.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,o)return a.src=K(i)[0].args[0],[s];var u=document.createTextNode(i);return a.appendChild(u),[s,new X(u,s)]},i.prototype.getChildren=function(t){return A([].filter.call(t.node.childNodes,k).map((function(e){var n=[e.nodeType===Node.TEXT_NODE?new X(e,t):new Y(e,t)].filter(B);return e.nodeType===Node.ELEMENT_NODE&&n.length&&"TEXTAREA"!==e.tagName?n[0].isElementVisible()?n.concat(this.getChildren(n[0])):[]:n}),this))},i.prototype.newStackingContext=function(t,e){var n=new G(e,t.getOpacity(),t.node,t.parent);t.cloneTo(n);var i=e?n.getParentStack(this):n.parent.stack;i.contexts.push(n),t.stack=n},i.prototype.createStackingContexts=function(){this.nodes.forEach((function(t){E(t)&&(this.isRootElement(t)||R(t)||S(t)||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):E(t)&&(C(t)&&g(t)||I(t)||O(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)}),this)},i.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},i.prototype.isRootElement=function(t){return null===t.parent},i.prototype.sortStackingContexts=function(t){t.contexts.sort(L(t.contexts.slice(0))),t.contexts.forEach(this.sortStackingContexts,this)},i.prototype.parseTextBounds=function(t){return function(e,n,i){if("none"!==t.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&&!t.parent.hasTransform()){var o=i.slice(0,n).join("").length;return this.getRangeBounds(t.node,o,e.length)}if(t.node&&"string"===typeof t.node.data){var r=t.node.splitText(e.length),a=this.getWrapperBounds(t.node,t.parent.hasTransform());return t.node=r,a}}else this.support.rangeBounds&&!t.parent.hasTransform()||(t.node=t.node.splitText(e.length));return{}}},i.prototype.getWrapperBounds=function(t,e){var n=t.ownerDocument.createElement("html2canvaswrapper"),i=t.parentNode,o=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),i.replaceChild(n,t);var r=e?Q(n):Z(n);return i.replaceChild(o,n),r},i.prototype.getRangeBounds=function(t,e,n){var i=this.range||(this.range=t.ownerDocument.createRange());return i.setStart(t,e),i.setEnd(t,e+n),i.getBoundingClientRect()},i.prototype.parse=function(t){var e=t.contexts.filter(p),n=t.children.filter(E),i=n.filter(j(O)),o=i.filter(j(C)).filter(j(v)),r=n.filter(j(C)).filter(O),s=i.filter(j(C)).filter(v),c=t.contexts.concat(i.filter(C)).filter(g),l=t.children.filter(T).filter(y),u=t.contexts.filter(m);e.concat(o).concat(r).concat(s).concat(c).concat(l).concat(u).forEach((function(t){this.renderQueue.push(t),b(t)&&(this.parse(t),this.renderQueue.push(new a))}),this)},i.prototype.paint=function(t){try{t instanceof a?this.renderer.ctx.restore():T(t)?(_(t.parent)&&t.parent.appendToDOM(),this.paintText(t),_(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(e){if(H(e),this.options.strict)throw e}},i.prototype.paintNode=function(t){b(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},i.prototype.paintElement=function(t){var e=t.parseBounds();this.renderer.clip(t.backgroundClip,(function(){this.renderer.renderBackground(t,e,t.borders.borders.map(P))}),this,t),this.renderer.mask(t.backgroundClip,(function(){this.renderer.renderShadows(t,t.borders.clip)}),this,t),this.renderer.clip(t.clip,(function(){this.renderer.renderBorders(t.borders.borders)}),this,t),this.renderer.clip(t.backgroundClip,(function(){switch(t.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(t.node);n?this.renderer.renderImage(t,e,t.borders,n):H("Error loading <"+t.node.nodeName+">",t.node);break;case"IMG":var i=this.images.get(t.node.src);i?this.renderer.renderImage(t,e,t.borders,i):H("Error loading <img>",t.node.src);break;case"CANVAS":this.renderer.renderImage(t,e,t.borders,{image:t.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(t)}}),this,t)},i.prototype.paintCheckbox=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height),i={width:n-1,height:n-1,top:e.top,left:e.left},o=[3,3],r=[o,o,o,o],a=[1,1,1,1].map((function(t){return{color:new U("#A5A5A5"),width:t}})),c=l(i,r,a);this.renderer.clip(t.backgroundClip,(function(){this.renderer.rectangle(i.left+1,i.top+1,i.width-2,i.height-2,new U("#DEDEDE")),this.renderer.renderBorders(s(a,i,c,r)),t.node.checked&&(this.renderer.font(new U("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",i.left+n/6,i.top+n-1))}),this,t)},i.prototype.paintRadio=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,(function(){this.renderer.circleStroke(e.left+1,e.top+1,n,new U("#DEDEDE"),1,new U("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+n/4)+1,Math.ceil(e.top+n/4)+1,Math.floor(n/2),new U("#424242"))}),this,t)},i.prototype.paintFormValue=function(t){var e=t.getValue();if(e.length>0){var n=t.node.ownerDocument,i=n.createElement("html2canvaswrapper"),o=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];o.forEach((function(e){try{i.style[e]=t.css(e)}catch(n){H("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}));var r=t.parseBounds();i.style.position="fixed",i.style.left=r.left+"px",i.style.top=r.top+"px",i.textContent=e,n.body.appendChild(i),this.paintText(new X(i.firstChild,t)),n.body.removeChild(i)}},i.prototype.paintText=function(t){t.applyTextTransform();var e=$.ucs2.decode(t.node.data),n=(!this.options.letterRendering||w(t))&&!W(t.node.data),i=n?z(e):e.map((function(t){return $.ucs2.encode([t])}));n||(t.parent.node.style.fontVariantLigatures="none");var o=t.parent.fontWeight(),r=t.parent.css("fontSize"),a=t.parent.css("fontFamily"),s=t.parent.parseTextShadows();this.renderer.font(t.parent.color("color"),t.parent.css("fontStyle"),t.parent.css("fontVariant"),o,r,a),s.length?this.renderer.fontShadow(s[0].color,s[0].offsetX,s[0].offsetY,s[0].blur):this.renderer.clearShadow(),this.renderer.clip(t.parent.clip,(function(){i.map(this.parseTextBounds(t),this).forEach((function(e,n){e&&(this.renderer.text(i[n],e.left,e.bottom),this.renderTextDecoration(t.parent,e,this.fontMetrics.getMetrics(a,r)))}),this)}),this,t.parent)},i.prototype.renderTextDecoration=function(t,e,n){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+n.baseline+n.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+n.middle+n.lineWidth),e.width,1,t.color("color"))}};var tt={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};i.prototype.parseBorders=function(t){var e=t.parseBounds(),n=x(t),i=["Top","Right","Bottom","Left"].map((function(e,n){var i=t.css("border"+e+"Style"),o=t.color("border"+e+"Color");"inset"===i&&o.isBlack()&&(o=new U([255,255,255,o.a]));var r=tt[i]?tt[i][n]:null;return{width:t.cssInt("border"+e+"Width"),color:r?o[r[0]](r[1]):o,style:i,pathArgs:null,args:null}})),o=l(e,n,i);return{clip:this.parseBackgroundClip(t,o,i,n,e),borders:s(i,e,o,n)}},i.prototype.parseBackgroundClip=function(t,e,n,i,o){var r=t.css("backgroundClip"),a=[];switch(r){case"content-box":case"padding-box":f(a,i[0],i[1],e.topLeftInner,e.topRightInner,o.left+n[3].width,o.top+n[0].width),f(a,i[1],i[2],e.topRightInner,e.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),f(a,i[2],i[3],e.bottomRightInner,e.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),f(a,i[3],i[0],e.bottomLeftInner,e.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:f(a,i[0],i[1],e.topLeftOuter,e.topRightOuter,o.left,o.top),f(a,i[1],i[2],e.topRightOuter,e.bottomRightOuter,o.left+o.width,o.top),f(a,i[2],i[3],e.bottomRightOuter,e.bottomLeftOuter,o.left+o.width,o.top+o.height),f(a,i[3],i[0],e.bottomLeftOuter,e.topLeftOuter,o.left,o.top+o.height)}return a},e.exports=i},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,n){function i(t,e,n){var i="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var o=a(i),c=s(e,t,o);return i?u(c):r(n,c,o).then((function(t){return p(t.content)}))}function o(t,e,n){var i="crossOrigin"in new Image,o=a(i),c=s(e,t,o);return i?Promise.resolve(c):r(n,c,o).then((function(t){return"data:"+t.type+";base64,"+t.content}))}function r(t,e,n){return new Promise((function(i,o){var r=t.createElement("script"),a=function(){delete window.html2canvas.proxy[n],t.body.removeChild(r)};window.html2canvas.proxy[n]=function(t){a(),i(t)},r.src=e,r.onerror=function(t){a(),o(t)},t.body.appendChild(r)}))}function a(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++m+"_"+Math.round(1e5*Math.random())}function s(t,e,n){return t+"?url="+encodeURIComponent(e)+(n.length?"&callback=html2canvas.proxy."+n:"")}function c(t){return function(e){var n,i=new DOMParser;try{n=i.parseFromString(e,"text/html")}catch(o){h("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(e),n.close()}catch(r){h("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=e}}var a=n.querySelector("base");if(!a||!a.href.host){var s=n.createElement("base");s.href=t,n.head.insertBefore(s,n.head.firstChild)}return n}}function l(t,e,n,o,r,a){return new i(t,e,window.document).then(c(t)).then((function(t){return f(t,n,o,r,a,0,0)}))}var u=t("./xhr"),d=t("./utils"),h=t("./log"),f=t("./clone"),p=d.decode64,m=0;n.Proxy=i,n.ProxyURL=o,n.loadUrlDocument=l},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e,n){function i(t,e){var n=document.createElement("a");n.href=t,t=n.href,this.src=t,this.image=new Image;var i=this;this.promise=new Promise((function(n,r){i.image.crossOrigin="Anonymous",i.image.onload=n,i.image.onerror=r,new o(t,e,document).then((function(t){i.image.src=t}))["catch"](r)}))}var o=t("./proxy").ProxyURL;e.exports=i},{"./proxy":16}],18:[function(t,e,n){function i(t,e,n){o.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===n}var o=t("./nodecontainer");i.prototype.cloneTo=function(t){i.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},i.prototype=Object.create(o.prototype),i.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},i.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},i.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=i},{"./nodecontainer":14}],19:[function(t,e,n){function i(t,e,n,i,o){this.width=t,this.height=e,this.images=n,this.options=i,this.document=o}var o=t("./log");i.prototype.renderImage=function(t,e,n,i){var o=t.cssInt("paddingLeft"),r=t.cssInt("paddingTop"),a=t.cssInt("paddingRight"),s=t.cssInt("paddingBottom"),c=n.borders,l=e.width-(c[1].width+c[3].width+o+a),u=e.height-(c[0].width+c[2].width+r+s);this.drawImage(i,0,0,i.image.width||l,i.image.height||u,e.left+o+c[3].width,e.top+r+c[0].width,l,u)},i.prototype.renderBackground=function(t,e,n){e.height>0&&e.width>0&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,n))},i.prototype.renderBackgroundColor=function(t,e){var n=t.color("backgroundColor");n.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,n)},i.prototype.renderShadows=function(t,e){var n=t.css("boxShadow");if("none"!==n){var i=n.split(/,(?![^(]*\))/);this.shadow(e,i)}},i.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},i.prototype.renderBorder=function(t){if(!t.color.isTransparent()&&null!==t.args)if("dashed"===t.style||"dotted"===t.style){var e="dashed"===t.style?3:t.width;this.ctx.setLineDash([e]),this.path(t.pathArgs),this.ctx.strokeStyle=t.color,this.ctx.lineWidth=t.width,this.ctx.stroke()}else this.drawShape(t.args,t.color)},i.prototype.renderBackgroundImage=function(t,e,n){var i=t.parseBackgroundImages();i.reverse().forEach((function(i,r,a){switch(i.method){case"url":var s=this.images.get(i.args[0]);s?this.renderBackgroundRepeating(t,e,s,a.length-(r+1),n):o("Error loading background-image",i.args[0]);break;case"linear-gradient":case"gradient":var c=this.images.get(i.value);c?this.renderBackgroundGradient(c,e,n):o("Error loading background-image",i.args[0]);break;case"none":break;default:o("Unknown background-image type",i.args[0])}}),this)},i.prototype.renderBackgroundRepeating=function(t,e,n,i,o){var r=t.parseBackgroundSize(e,n.image,i),a=t.parseBackgroundPosition(e,n.image,i,r),s=t.parseBackgroundRepeat(i);switch(s){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,a,r,e,e.left+o[3],e.top+a.top+o[0],99999,r.height,o);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,a,r,e,e.left+a.left+o[3],e.top+o[0],r.width,99999,o);break;case"no-repeat":this.backgroundRepeatShape(n,a,r,e,e.left+a.left+o[3],e.top+a.top+o[0],r.width,r.height,o);break;default:this.renderBackgroundRepeat(n,a,r,{top:e.top,left:e.left},o[3],o[0])}},e.exports=i},{"./log":13}],20:[function(t,e,n){function i(t,e){r.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options.canvas||(this.options.dpi&&(this.options.scale=this.options.dpi/96),this.options.scale?(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.canvas.width=Math.floor(t*this.options.scale),this.canvas.height=Math.floor(e*this.options.scale),this.ctx.scale(this.options.scale,this.options.scale)):(this.canvas.width=t,this.canvas.height=e)),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},s("Initialized CanvasRenderer with size",t,"x",e)}function o(t){return t.length>0}var r=t("../renderer"),a=t("../lineargradientcontainer"),s=t("../log");i.prototype=Object.create(r.prototype),i.prototype.setFillStyle=function(t){return this.ctx.fillStyle="object"===c(t)&&t.isColor?t.toString():t,this.ctx},i.prototype.rectangle=function(t,e,n,i,o){this.setFillStyle(o).fillRect(t,e,n,i)},i.prototype.circle=function(t,e,n,i){this.setFillStyle(i),this.ctx.beginPath(),this.ctx.arc(t+n/2,e+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},i.prototype.circleStroke=function(t,e,n,i,o,r){this.circle(t,e,n,i),this.ctx.strokeStyle=r.toString(),this.ctx.stroke()},i.prototype.shadow=function(t,e){var n=function(t){var e={color:/^(#|rgb|hsl|(?!(inset|initial|inherit))\D+)/i,inset:/^inset/i,px:/px$/i},n=["x","y","blur","spread"],i=t.split(/ (?![^(]*\))/),o={};for(var r in e)o[r]=i.filter(e[r].test.bind(e[r])),o[r]=0===o[r].length?null:1===o[r].length?o[r][0]:o[r];for(var a=0;a<o.px.length;a++)o[n[a]]=parseInt(o.px[a]);return o},i=function(t){var e=n(t);e.inset||(o.shadowOffsetX=e.x,o.shadowOffsetY=e.y,o.shadowColor=e.color,o.shadowBlur=e.blur,o.fill())},o=this.setFillStyle("white");o.save(),this.shape(t),e.forEach(i,this),o.restore()},i.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},i.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},i.prototype.drawImage=function(t,e,n,i,o,r,a,s,c){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,n,i,o,r,a,s,c)},i.prototype.clip=function(t,e,n,i){this.ctx.save(),i&&i.hasTransform()?(this.setTransform(i.inverseTransform()),t.filter(o).forEach((function(t){this.shape(t).clip()}),this),this.setTransform(i.parseTransform())):t.filter(o).forEach((function(t){this.shape(t).clip()}),this),e.call(n),this.ctx.restore()},i.prototype.mask=function(t,e,n,i){var o=t[t.length-1];if(o&&o.length){var r=["rect",this.canvas.width,0,-this.canvas.width,this.canvas.height],a=[r].concat(o).concat([o[0]]);t=t.slice(0,-1).concat([a])}this.clip(t,e,n,i)},i.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach((function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))}),this),this.ctx.closePath(),this.ctx},i.prototype.path=function(t){return this.ctx.beginPath(),t.forEach((function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))}),this),this.ctx},i.prototype.font=function(t,e,n,i,o,r){n=/^(normal|small-caps)$/i.test(n)?n:"",this.setFillStyle(t).font=[e,n,i,o,r].join(" ").split(",")[0]},i.prototype.fontShadow=function(t,e,n,i){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",n).setVariable("shadowBlur",i)},i.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},i.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},i.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},i.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},i.prototype.text=function(t,e,n){this.ctx.fillText(t,e,n)},i.prototype.backgroundRepeatShape=function(t,e,n,i,o,r,a,s,c){var l=[["line",Math.round(o),Math.round(r)],["line",Math.round(o+a),Math.round(r)],["line",Math.round(o+a),Math.round(s+r)],["line",Math.round(o),Math.round(s+r)]];this.clip([l],(function(){this.renderBackgroundRepeat(t,e,n,i,c[3],c[0])}),this)},i.prototype.renderBackgroundRepeat=function(t,e,n,i,o,r){var a=Math.round(i.left+e.left+o),s=Math.round(i.top+e.top+r);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,n),"repeat")),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},i.prototype.renderBackgroundGradient=function(t,e){if(t instanceof a){var n=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach((function(t){n.addColorStop(t.stop,t.color.toString())})),this.rectangle(e.left,e.top,e.width,e.height,n)}},i.prototype.resizeImage=function(t,e){var n,i=t.image;if(i.width===e.width&&i.height===e.height)return i;var o=document.createElement("canvas");return o.width=e.width,o.height=e.height,n=o.getContext("2d"),n.drawImage(i,0,0,i.width,i.height,0,0,e.width,e.height),o},e.exports=i},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e,n){function i(t,e,n,i){o.call(this,n,i),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}var o=t("./nodecontainer");i.prototype=Object.create(o.prototype),i.prototype.getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=i},{"./nodecontainer":14}],22:[function(t,e,n){function i(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}i.prototype.testRangeBounds=function(t){var e,n,i,o,r=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),i=e.getBoundingClientRect(),o=i.height,123===o&&(r=!0),t.body.removeChild(n))),r},i.prototype.testCORS=function(){return"undefined"!==typeof(new Image).crossOrigin},i.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),n=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),e.toDataURL()}catch(i){return!1}return!0},e.exports=i},{}],23:[function(t,e,n){function i(t){this.src=t,this.image=null;var e=this;this.promise=this.hasFabric().then((function(){return e.isInline(t)?Promise.resolve(e.inlineFormatting(t)):o(t)})).then((function(t){return new Promise((function(n){window.html2canvas.svg.fabric.loadSVGFromString(t,e.createCanvas.call(e,n))}))}))}var o=t("./xhr"),r=t("./utils").decode64;i.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},i.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},i.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},i.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},i.prototype.createCanvas=function(t){var e=this;return function(n,i){var o=new window.html2canvas.svg.fabric.StaticCanvas("c");e.image=o.lowerCanvasEl,o.setWidth(i.width).setHeight(i.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(n,i)).renderAll(),t(o.lowerCanvasEl)}},i.prototype.decode64=function(t){return"function"===typeof window.atob?window.atob(t):r(t)},e.exports=i},{"./utils":26,"./xhr":28}],24:[function(t,e,n){function i(t,e){this.src=t,this.image=null;var n=this;this.promise=e?new Promise((function(e,i){n.image=new Image,n.image.onload=e,n.image.onerror=i,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(t),!0===n.image.complete&&e(n.image)})):this.hasFabric().then((function(){return new Promise((function(e){window.html2canvas.svg.fabric.parseSVGDocument(t,n.createCanvas.call(n,e))}))}))}var o=t("./svgcontainer");i.prototype=Object.create(o.prototype),e.exports=i},{"./svgcontainer":23}],25:[function(t,e,n){function i(t,e){r.call(this,t,e)}function o(t,e,n){if(t.length>0)return e+n.toUpperCase()}var r=t("./nodecontainer");i.prototype=Object.create(r.prototype),i.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},i.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return e.toUpperCase();default:return e}},e.exports=i},{"./nodecontainer":14}],26:[function(t,e,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(t,e){return function(){return t.apply(e,arguments)}},n.decode64=function(t){var e,n,i,o,r,a,s,c,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=t.length,d="";for(e=0;e<u;e+=4)n=l.indexOf(t[e]),i=l.indexOf(t[e+1]),o=l.indexOf(t[e+2]),r=l.indexOf(t[e+3]),a=n<<2|i>>4,s=(15&i)<<4|o>>2,c=(3&o)<<6|r,d+=64===o?String.fromCharCode(a):64===r||-1===r?String.fromCharCode(a,s):String.fromCharCode(a,s,c);return d},n.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),n=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+n,left:e.left,width:n,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},n.offsetBounds=function(t){var e=t.offsetParent?n.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},n.parseBackgrounds=function(t){var e,n,i,o,r,a,s,c=" \r\n\t",l=[],u=0,d=0,h=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===e.substr(0,1)&&(o=e.indexOf("-",1)+1)>0&&(i=e.substr(0,o),e=e.substr(o)),l.push({prefix:i,method:e.toLowerCase(),value:r,args:s,image:null})),s=[],e=i=n=r=""};return s=[],e=i=n=r="",t.split("").forEach((function(t){if(!(0===u&&c.indexOf(t)>-1)){switch(t){case'"':a?a===t&&(a=null):a=t;break;case"(":if(a)break;if(0===u)return u=1,void(r+=t);d++;break;case")":if(a)break;if(1===u){if(0===d)return u=0,r+=t,void h();d--}break;case",":if(a)break;if(0===u)return void h();if(1===u&&0===d&&!e.match(/^url$/i))return s.push(n),n="",void(r+=t)}r+=t,0===u?e+=t:n+=t}})),h(),l}},{}],27:[function(t,e,n){function i(t){o.apply(this,arguments),this.type="linear"===t.args[0]?o.TYPES.LINEAR:o.TYPES.RADIAL}var o=t("./gradientcontainer");i.prototype=Object.create(o.prototype),e.exports=i},{"./gradientcontainer":9}],28:[function(t,e,n){function i(t){return new Promise((function(e,n){var i=new XMLHttpRequest;i.open("GET",t),i.onload=function(){200===i.status?e(i.responseText):n(new Error(i.statusText))},i.onerror=function(){n(new Error("Network Error"))},i.send()}))}e.exports=i},{}]},{},[4])(4)}))}).call(this,n("2409"))},"0736":function(t,e,n){},"09d8":function(t,e,n){},"0ae8":function(t,e,n){},"11c8":function(t,e,n){},1613:function(t,e,n){"use strict";n.d(e,"b",(function(){return o}));var i=n("6380");n.d(e,"a",(function(){return i["a"]}));var o={bind:function(t,e){t.onmousedown=function(t){var n=document.querySelector(String(e.arg));if(n){var i=t.clientX-n.offsetLeft,o=t.clientY-n.offsetTop,r=0,a=window.innerWidth-n.clientWidth,s=0,c=window.innerHeight-n.clientHeight;document.addEventListener("mousemove",l),document.addEventListener("mouseup",(function(){document.removeEventListener("mousemove",l),document.onmouseup=null}))}function l(t){var e=Math.min(Math.max(t.clientX-i,r),a),l=Math.min(Math.max(t.clientY-o,s),c);n.style.left=e+"px",n.style.top=l+"px"}}}}},"16db":function(t,e,n){"use strict";n("c21b")},"17a6":function(t,e,n){"use strict";n("5092")},"186d":function(t,e,n){"use strict";n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return S}));var i=n("06c4"),o=n("97ee"),r=n("b42e"),a=n("8955"),s=n("0344"),c=(n("aa88"),n("c7ae"),n("e836"),n("9135"),n("9673"),n("54e9"),n("847f"),n("0029"),n("6b1d")),l=n.n(c),u=n("4549"),d=n("4360");function h(t,e){var n=e?JSON.stringify(e.$data):null;return Object(i["a"])(Object(i["a"])({},JSON.parse(JSON.stringify(t))),{},{initHook:t.initHook,_codeGen:t._codeGen,componentState:function(){return n&&JSON.parse(n)}})}var f={$moveToTop:function(t){d["a"].dispatch("poster/widgetMoveToTop",t)},$moveToUpper:function(t){d["a"].dispatch("poster/widgetMoveToUpper",t)},$moveToLower:function(t){d["a"].dispatch("poster/widgetMoveToLower",t)},$moveToBottom:function(t){d["a"].dispatch("poster/widgetMoveToBottom",t)},$remove:function(t){d["a"].dispatch("poster/removeItem",t)},$lock:function(t){d["a"].dispatch("poster/lockItem",t)},$unlock:function(t){d["a"].dispatch("poster/unlockItem",t)},$copy:function(t,e){d["a"].dispatch("poster/copyWidget",h(t,e))}},p=[{label:"复制",command:"$copy"},{label:"置于顶层",command:"$moveToTop"},{label:"上移一层",command:"$moveToUpper"},{label:"下移一层",command:"$moveToLower"},{label:"置于底层",command:"$moveToBottom"},{label:"删除",command:"$remove"}],m=n("2317"),g=n.n(m),v=function(){return{id:"",type:"",typeLabel:"",componentName:"",icon:"",wState:{},dragInfo:{w:100,h:100,x:0,y:0,rotateZ:0},rename:"",lock:!1,visible:!0,initHook:null,layerPanelVisible:!0,replicable:!0,isCopied:!1,removable:!0,couldAddToActive:!0,componentState:null}},b={};function y(){return p}function w(t,e,n,i){var o=t.width,r=t.height,c=e.top,l=e.left;d["a"].state.poster.referenceLineOpened||(n={row:[],col:[]});var u={row:[].concat(Object(s["a"])(n.row),[c,c+r,c+parseInt(r/2)]),col:[].concat(Object(s["a"])(n.col),[l,l+o,l+parseInt(o/2)])},h={row:[],col:[]};Object.values(i).forEach((function(t){if(t){var e=t.x,n=t.y,i=t.w,o=t.h;h.row.push(n,parseInt(n+o/2),n+o),h.col.push(e,parseInt(e+i/2),e+i)}}));var f={row:[].concat(Object(s["a"])(u.row.map((function(t){return t-c}))),Object(s["a"])(h.row)),col:[].concat(Object(s["a"])(u.col.map((function(t){return t-l}))),Object(s["a"])(h.col))},p={row:f.row.reduce((function(t,e){return Object.assign(t,Object(a["a"])({},e,{min:e-5,max:e+5,value:e}))}),{}),col:f.col.reduce((function(t,e){return Object.assign(t,Object(a["a"])({},e,{min:e-5,max:e+5,value:e}))}),{})};return p}function x(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$store.dispatch("poster/updateDragInfo",{dragInfo:t,widgetId:this.item.id,updateSelfOnly:e})}var k=function(){function t(e){var n=this;Object(o["a"])(this,t);var i=g()(v(),e,{id:l()(e.typeLabel+"-")});Object.keys(i).forEach((function(t){n[t]=i[t]}))}return Object(r["a"])(t,null,[{key:"widgetMixin",value:function(t){return t=Object.assign({},{baseMenuList:y(),contextmenu:!0},t),{data:function(){return{$controlTarget:"widgetControl"}},props:{item:{type:Object,default:function(){return{}}},isActive:{type:Boolean,default:!1}},computed:{wState:function(){return this.item.wState},dragInfo:{get:function(){return this.item.dragInfo},set:function(t){this.updateDragInfo(t)}}},created:function(){if(this.item.initHook&&"function"===typeof this.item.initHook&&this.item.initHook(this._self),this._baseMenuList=t.baseMenuList,this.item.isCopied&&"command"===this.item._copyFrom&&!this.item._isBackup){var e=this.item._copyCount;this.updateDragInfo({x:this.dragInfo.x+10*e,y:this.dragInfo.y+10*e},!0)}},mounted:function(){var e=this,n=this.$refs.drag||(this.$parent._isHoc?this.$parent.$parent:this.$parent);t.contextmenu&&n.$el.addEventListener("contextmenu",(function(t){var n=[].concat(Object(s["a"])(e.getMenuList()||[]),Object(s["a"])(e._baseMenuList)),i=e.item.lock;"background"!==e.item.type&&n.unshift({label:i?"解除锁定":"锁定",command:i?"$unlock":"$lock"}),n.length>0&&(console.log("contextmenu"),e.$emit("openContextmenu",{x:t.pageX,y:t.pageY,menuList:n,vm:e._self}))})),this.$dragRef=n},methods:{updateDragInfo:x,getMenuList:function(){return console.warn("".concat(this.item.type,"-").concat(this.item.id,': "getMenuList" is null')),null},executeContextCommand:function(t){return console.warn("".concat(this.item.type,"-").concat(this.item.id,': "executeContextCommand" is null')),null},_executeBaseContextCommand:function(t){return!!f[t]&&(f[t](this.item,this._self),!0)},_executeContextCommand:function(t){var e=t.command;e&&(this._executeBaseContextCommand(e)||this.executeContextCommand(e))}}}}},{key:"getPositionStyle",value:function(t){if(!t)return null;var e=d["a"].state.poster.canvasSize;return{position:"absolute",width:t.w/e.width*100+"%",height:t.h/e.height*100+"%",left:t.x/e.width*100+"%",top:t.y/e.height*100+"%",transform:"rotateZ(".concat(t.rotateZ,"deg)")}}}]),t}();function S(t){t=Object.assign({},t);var e=!1,n=null,o=null,r=null;return{data:function(){return{isActive:!1}},props:{item:{type:Object,default:function(){return{}}}},computed:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["activeItemIds"])),{},{wState:function(){return this.item.wState},dragInfo:{get:function(){return this.item.dragInfo},set:function(t){this.updateDragInfo(t)}}}),beforeDestroy:function(){delete b[this.item.id]},watch:{activeItemIds:{handler:function(t){this.item.couldAddToActive&&(this.isActive=t.includes(this.item.id))},immediate:!0}},mounted:function(){this.dragRef=this.$refs.drag,b[this.item.id]=this.dragInfo},methods:Object(i["a"])(Object(i["a"])({},Object(u["a"])(["addActiveItem","replaceActiveItems","removeActiveItem","setMatchedLine","removeMatchedLine"])),{},{activated:function(t){this.isActive=!0,t&&(t.ctrlKey?this.addActiveItem(this.item):this.replaceActiveItems([this.item]))},deactivated:function(){this.isActive=!1,this.removeActiveItem(this.item)},onResize:function(t,e,n,i){this.resizing||(this.resizing=!0,d["a"].dispatch("poster/history/push")),this.updateDragInfo({x:t,y:e,w:n,h:i}),b[this.item.id]=this.dragInfo},onResizeStop:function(){this.resizing=!1},onDrag:function(t,i,s){var c=this;if(this.moving||(this.moving=!0,d["a"].dispatch("poster/history/push")),!e&&s&&s.ctrlKey){var l=d["a"].state.poster.copiedWidgets,u=this.item;u._copyFrom="drag",d["a"].dispatch("poster/copyWidget",u),d["a"].dispatch("poster/pasteWidget"),d["a"].dispatch("poster/copyWidget",l),e=!0}if(s.altKey)this.updateDragInfo({x:t,y:i});else{n=n||d["a"].state.poster.canvasSize,o=o||d["a"].state.poster.canvasPosition,r||(r=w(n,o,d["a"].state.poster.referenceLine,Object.assign({},b,Object(a["a"])({},this.item.id,null))));var h,f,p=t+this.dragInfo.w,m=i+this.dragInfo.h,g={row:[i,parseInt((i+m)/2),m],col:[t,parseInt((t+p)/2),p]},v=null,y=null,x={row:g.row.map((function(t,e){var n=null;return Object.values(r.row).forEach((function(e){t>=e.min&&t<=e.max&&(n=e.value)})),null!==n&&(0===e?y=n:1===e?y=parseInt(n-c.dragInfo.h/2):2===e&&(y=parseInt(n-c.dragInfo.h))),n})).filter((function(t){return null!==t})),col:g.col.map((function(t,e){var n=null;return Object.values(r.col).forEach((function(e){t>=e.min&&t<=e.max&&(n=e.value)})),null!==n&&(0===e?v=n:1===e?v=parseInt(n-c.dragInfo.w/2):2===e&&(v=parseInt(n-c.dragInfo.w))),n})).filter((function(t){return null!==t}))};null!==v?(h=v,this.dragRef&&(this.dragRef.elmX=v,this.dragRef.left=v)):h=t,null!==y?(f=y,this.dragRef&&(this.dragRef.elmY=y,this.dragRef.top=y)):f=i,this.updateDragInfo({x:h,y:f}),b[this.item.id]=this.dragInfo,this.setMatchedLine({row:x.row.map((function(t){return t+o.top})),col:x.col.map((function(t){return t+o.left}))})}},onDragStop:function(t){this.moving?(this.moving=!1,e=!1,n=null,o=null,r=null,this.removeMatchedLine()):t.ctrlKey||this.replaceActiveItems([this.item])},onRotate:function(t){this.rotating||(this.rotating=!0,d["a"].dispatch("poster/history/push")),this.updateDragInfo({rotateZ:(t>0?t:360+t)%360})},onRotateStop:function(){this.rotating=!1},updateDragInfo:x})}}},"24ab":function(t,e,n){t.exports={colorTheme:"#019aff",colorThemeD:"#2946a8",colorThemeDD:"#263445",colorThemeL:"#e2e6f3",colorSideBarBg:"#353744",colorBg1:"#f5f8fd",colorBg2:"#f4f4f4",colorSuccess:"#67c23a",colorWarn:"#e6a23c",colorDanger:"#f56c6c",colorError:"#f56c6c",colorMoney:"#f60",colorText:"#606266",colorTextD:"#303133",colorTextL:"#909399",colorBorder:"#dcdfe6"}},"26cb":function(t,e,n){"use strict";n("57dd")},"282c":function(t,e,n){"use strict";n("8d9f")},2875:function(t,e,n){"use strict";n("9701")},3052:function(t,e,n){},"32a4":function(t,e,n){"use strict";n("d18a5")},"35bc":function(t,e,n){"use strict";n("57ef")},"36e6":function(t,e,n){},"3cb7":function(t,e,n){},4360:function(t,e,n){"use strict";var i=n("430a"),o=n("7736"),r={},a=r;i["default"].use(o["b"]);var s=new o["b"].Store({getters:a,plugins:[]});e["a"]=s},"44a9":function(t,e,n){},4549:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return c}));var i=n("7736"),o=Object(i["a"])("poster"),r=o.mapState,a=o.mapGetters,s=o.mapMutations,c=o.mapActions},"4a7a":function(t,e,n){"use strict";n("3052")},"4ade":function(t,e,n){"use strict";n("36e6")},"4fd4":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vue-draggable-resizable",{ref:"drag",staticClass:"drag-item",class:{solid:t.wState.isSolid},attrs:{w:t.dragInfo.w,h:t.dragInfo.h,x:t.dragInfo.x,y:t.dragInfo.y,r:t.dragInfo.rotateZ,"min-width":10,"min-height":10,rotatable:!1,lock:t.item.lock,active:t.isActive,"deselect-cancel":".poster-editor_deactivated-ignore"},on:{"update:active":function(e){t.isActive=e},activated:t.activated,deactivated:t.deactivated,dragging:t.onDrag,resizing:t.onResize,rotating:t.onRotate,dragstop:t.onDragStop,rotatestop:t.onRotateStop,resizestop:t.onResizeStop}},[t.wState.isSolid?n("div",{staticClass:"poster-editor-background",style:{backgroundColor:t.wState.style.backgroundColor,width:"100%",height:"100%"}}):n("img",{ref:"image",staticClass:"qr-code",staticStyle:{width:"100%",height:"100%"},attrs:{src:t.wState.src,ondragstart:"return false"}})])},o=[],r=n("06c4"),a=n("7e19"),s=n("4549"),c=n("a928"),l={components:{vueDraggableResizable:a["a"]},mixins:[c["a"].widgetMixin()],props:{item:{type:Object,default:function(){return{}}}},data:function(){return{isActive:!1,draggable:!0,resizable:!0}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(s["b"])(["activeItemIds"])),Object(s["d"])(["canvasSize","copiedWidgets"])),{},{dragInfo:{get:function(){return this.item.dragInfo},set:function(t){this.item.dragInfo=t}},wState:function(){return this.item.wState}}),watch:{activeItemIds:function(t){t.length>0&&(this.isActive=!1)}},mounted:function(){this.updateBackgroundDragInfo({w:this.canvasSize.width,h:this.canvasSize.height,x:0,y:0}),this.wState.isSolid&&(this.resizable=!1,this.draggable=!1)},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(s["a"])(["removeBackground","setBackgroundConfig","pasteWidget","replaceActiveItems","selectAllItems","updateBackgroundDragInfo"])),Object(s["a"])({pushHistory:"history/push"})),{},{executeContextCommand:function(t){"remove"===t?this.item.lock||this.removeBackground(null):"lock"===t?this.setBackgroundConfig((function(t){t.lock=!0})):"unlock"===t?this.setBackgroundConfig((function(t){t.lock=!1})):"paste"===t?this.pasteWidget():"selectAll"===t&&this.selectAllItems()},getMenuList:function(){var t=[{label:"全选",command:"selectAll"}];return this.copiedWidgets&&t.unshift({label:"粘贴",command:"paste"}),this.wState.isSolid||(this.item.lock?t.unshift({label:"解除锁定",command:"unlock"}):t.unshift({label:"锁定",command:"lock"}),t.push({label:"删除",command:"remove"})),t},activated:function(){this.isActive=!0,this.replaceActiveItems([])},deactivated:function(){this.isActive=!1},onDrag:function(t,e){this.dragging||(this.pushHistory(),this.dragging=!0),this.updateBackgroundDragInfo({x:t,y:e})},onResize:function(t,e,n,i){this.resizing||(this.pushHistory(),this.resizing=!0),this.updateBackgroundDragInfo({x:t,y:e,w:n,h:i})},onRotate:function(t){this.rotating||(this.pushHistory(),this.rotating=!0),this.updateBackgroundDragInfo({rotateZ:(t>0?t:360+t)%360})},onDragStop:function(){this.dragging=!1},onResizeStop:function(){this.resizing=!1},onRotateStop:function(){this.rotating=!1}})},u=l,d=(n("b2c7"),n("cba8")),h=Object(d["a"])(u,i,o,!1,null,"5966da4e",null);e["default"]=h.exports},5092:function(t,e,n){},"529b":function(t,e,n){},5360:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return x})),n.d(e,"d",(function(){return I}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"radio-group"},[n("ul",t._l(t.list,(function(e,i){return n("li",{key:i,staticClass:"item",class:{active:t.valueFormat.includes(e.value)},attrs:{title:e.label},on:{click:function(n){return t.select(e)}}},[t._t(e.value,(function(){return[t._v(" "+t._s(e.label)+" ")]}))],2)})),0)])},o=[],r=n("0344"),a=(n("54e9"),n("847f"),n("0029"),n("aa88"),{model:{event:"change",prop:"value"},props:{list:{type:Array,default:function(){return[]}},value:{type:[String,Array],default:""}},computed:{valueFormat:function(){return Array.isArray(this.value)?this.value:[this.value]}},methods:{select:function(t){var e;if("string"===typeof this.value)e=this.value===t.value?"":t.value,this.$emit("change",e);else if(Array.isArray(this.value)){var n="",i=t.value;this.value.includes(t.value)?(n="remove",e=this.value.filter((function(e){return e!==t.value}))):(n="add",e=[].concat(Object(r["a"])(this.value),[t.value])),e._operation=n,e._value=i,this.$emit("change",e)}}}}),s=a,c=(n("eea9"),n("cba8")),l=Object(c["a"])(s,i,o,!1,null,"148e1e4c",null),u=l.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting-content"},[t._t("default")],2)},h=[],f={},p=f,m=(n("16db"),Object(c["a"])(p,d,h,!1,null,"6b1caa77",null)),g=m.exports,v=function(t,e){var n=e._c;return n("div",{staticClass:"setting-item"},[n("div",{staticClass:"label"},[e._v(e._s(e.props.label))]),n("div",{staticClass:"content"},[e._t("default")],2)])},b=[],y=(n("a3de"),{}),w=Object(c["a"])(y,v,b,!0,null,"56eeecee",null),x=w.exports,k=function(t,e){var n=e._c;return n("div",{staticClass:"setting-row"},[e._t("left"),n("div",{staticClass:"gap"}),e._t("right")],2)},S=[],C=(n("a8fb"),{}),O=Object(c["a"])(C,k,S,!0,null,"8617ea4a",null),I=O.exports},5473:function(t,e,n){"use strict";n("cde1")},"547f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("4edc"),n("ad28"),n("29aa"),n("ec12");var i=n("430a"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("poster-editor")],1)},r=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"poster-editor",class:{"init-loading":t.initLoading}},[n("div",{staticClass:"base"},[n("left-side"),n("main-component",{ref:"main"}),n("extend-side-bar"),n("control-component")],1),n("transition",{attrs:{name:"el-zoom-in-top"}},[n("layer-panel",{directives:[{name:"show",rawName:"v-show",value:t.layerPanelOpened,expression:"layerPanelOpened"}]})],1)],1)},s=[],c=n("0344"),l=n("e9ff"),u=n("06c4"),d=(n("0029"),n("54e9"),n("847f"),n("9135"),n("e186"),n("4549")),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"poster-editor-control poster-editor_deactivated-ignore"},[n("portal-target",{staticClass:"control-target",attrs:{name:"widgetControl"}}),n("widget-composition-control")],1)},f=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.activeItems.length>1?n("div",{staticClass:"widget-composition-control"},[n("setting-content",[n("setting-item",{attrs:{label:"组件对齐"}},[n("radio-group",{attrs:{list:t.alignList},on:{change:function(e){return t.changeCompositionPosition(e)}}})],1)],1)],1):t._e()},m=[],g=n("5360"),v={components:{settingContent:g["b"],settingItem:g["c"],radioGroup:g["a"]},data:function(){return{alignList:[{label:"左对齐",value:"alignLeft"},{label:"居中",value:"alignCenter"},{label:"右对齐",value:"alignRight"}]}},computed:Object(u["a"])({},Object(d["d"])(["activeItems"])),methods:Object(u["a"])({},Object(d["a"])(["changeCompositionPosition"]))},b=v,y=(n("689c"),n("cba8")),w=Object(y["a"])(b,p,m,!1,null,"212364f7",null),x=w.exports,k={components:{widgetCompositionControl:x},data:function(){return{}},methods:{}},S=k,C=(n("c7bf"),Object(y["a"])(S,h,f,!1,null,"5854ce46",null)),O=C.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"main",staticClass:"poster-editor-main",on:{contextmenu:function(t){t.preventDefault()}}},[n("div",{ref:"mainPanelScrollContent",staticClass:"main-panel-scroll-content"},[n("div",{staticClass:"main-panel-contaienr"},[n("main-panel",{ref:"mainPanel",on:{openContextmenu:t.openContextmenu}})],1)]),n("div",{staticClass:"mask",style:t.maskStyle}),n("ruler-component"),n("bottom-bar"),n("functional-bar"),t.contextmenuVisible?n("custom-contextmenu",t._b({directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.closeContextmenu,expression:"closeContextmenu"}],attrs:{"menu-list":t.menuList},on:{executeCommand:t.executeContextCommand}},"custom-contextmenu",t.contextmenuPosition,!1)):t._e()],1)},j=[],E=(n("aa88"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-panel",style:{width:t.canvasSize.width+"px",height:t.canvasSize.height+"px"},on:{mousedown:function(t){t.preventDefault(),t.stopPropagation()}}},[t.background?n("background-widget",t._g({key:t.background.id,attrs:{item:t.background}},t.$listeners)):t._e(),t._l(t.posterItems,(function(e){return n("widget-container",t._g({directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"item.visible"}],key:e.id,attrs:{item:e}},t.$listeners))})),t._l(t.assistWidgets,(function(t){return n(t.componentName,{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"item.visible"}],key:t.id,tag:"component",attrs:{item:t}})}))],2)}),_=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vue-draggable-resizable",{ref:"drag",staticClass:"drag-item",attrs:{w:t.dragInfo.w,h:t.dragInfo.h,x:t.dragInfo.x,y:t.dragInfo.y,r:t.dragInfo.rotateZ,minw:10,minh:1,resizable:!0,lock:t.item.lock,active:t.isActive,"deselect-cancel":".poster-editor_deactivated-ignore",draggable:t.draggable},on:{"update:active":function(e){t.isActive=e},activated:t.activated,deactivated:t.deactivated,dragging:t.onDrag,resizing:t.onResize,rotating:t.onRotate,dragstop:t.onDragStop,rotatestop:t.onRotateStop,resizestop:t.onResizeStop}},[n(t.item.componentName,t._g({ref:"widget",tag:"component",attrs:{item:t.item,"is-active":t.isActive},on:{draggableChange:function(e){t.draggable=e}}},t.$listeners))],1)},L=[],R=n("7e19"),M=n("186d"),P=(n("c7ae"),n("4c4d"),n("dfdd"),n("83a0"),n("2f90"),n("e836"),n("4360")),B={addWidget:function(t){P["a"].dispatch("poster/addItem",t)},removeWidget:function(t){P["a"].dispatch("poster/removeItem",t)},updateWidgetState:function(t){P["a"].dispatch("poster/updateWidgetState",t)},updateDragInfo:function(t){P["a"].dispatch("poster/updateDragInfo",t)},getCanvasSize:function(){return P["a"].getters["poster/canvasSize"]},setCanvasSize:function(t){P["a"].dispatch("poster/setCanvasSize",t)},recoverEditorData:function(t){P["a"].dispatch("poster/backup/recover",t)}},A=n("adde"),D={leftSide:{},widget:{},controlPanel:{},bottomBar:{},extendSideBar:{}};var z={};function N(t,e){if(!e._registered){e._registered=!0;var n=e.leftSide,i=e.bottomBar,o=e.controlPanel,r=e.extendSideBar,a=e.widget;if(n&&(D.leftSide[t]=n),i&&(D.bottomBar[t]=i),o&&(D.controlPanel[t]=o),r&&(D.extendSideBar[t]=r),a){var s=a.component,c=a.constructor,l=new c,u=l.componentName,d=l.type;if(0!==u.indexOf("plugin-"))return;D.widget[t]={constructor:c,component:W(s,c,o&&o.component),componentName:u},z[d]=a.constructor}}}function W(t,e,n){return H(t,[e.widgetMixin(),{components:{controlPanel:n?$(n):null,controlPanelPortal:{render:function(t){return this.$parent.isActive?t("portal",{attrs:{to:this.$parent.$data.$controlTarget}},this.$slots.default):null}}}}]),t}function H(t,e){var n;t.mixins||(t.mixins=[]),(n=t.mixins).push.apply(n,Object(c["a"])(e))}function $(t){return H(t,[{beforeCreate:function(){this.$pluginHelpers=B}}]),t}var Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"left-side-test"},[n("el-button",{attrs:{size:"small"},on:{click:t.add}},[t._v("插件测试")])],1)},X=[],F=n("97ee"),V=n("db8d"),U=n("ea19"),G=n("a928"),q=n("2317"),J=n.n(q),Z=function(t){Object(V["a"])(n,t);var e=Object(U["a"])(n);function n(t){return Object(F["a"])(this,n),t=J()({type:"pluginA",typeLabel:"插件测试",componentName:"plugin-pluginA",icon:"el-icon-star-off",replicable:!1,wState:{buttonCount:3}},t),e.call(this,t)}return n}(G["g"]),K={methods:{add:function(){this.$pluginHelpers.addWidget(new Z)}}},Q=K,tt=(n("32a4"),Object(y["a"])(Q,Y,X,!1,null,"3bff0775",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plugin-a"},[t._l(t.wState.buttonCount,(function(e){return n("button",{key:e},[t._v(t._s(e))])})),n("control-panel-portal",[n("control-panel",{attrs:{item:t.item}})],1)],2)},it=[],ot={data:function(){return{}},methods:{executeContextCommand:function(t){this.$message.success("插件测试命令")},getMenuList:function(){return[{label:"插件测试",command:"test"}]}}},rt=ot,at=(n("eb28"),Object(y["a"])(rt,nt,it,!1,null,"56b95c44",null)),st=at.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plugin-a"},[n("el-form",[n("el-form-item",{attrs:{label:"按钮数量"}},[n("el-input",{attrs:{type:"number"},model:{value:t.buttonCount,callback:function(e){t.buttonCount=e},expression:"buttonCount"}})],1)],1)],1)},lt=[],ut={mixins:[A["a"]],computed:{buttonCount:{get:function(){return this.wState.buttonCount},set:function(t){this.$pluginHelpers.updateWidgetState({keyPath:"buttonCount",value:parseInt(t),widgetId:this.item.id})}}}},dt=ut,ht=(n("35bc"),Object(y["a"])(dt,ct,lt,!1,null,"4b21e1a0",null)),ft=ht.exports,pt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},mt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plugin-a"},[n("button",[t._v(" #底部工具栏插件测试# ")])])}],gt={data:function(){return{}},methods:{}},vt=gt,bt=(n("957b"),Object(y["a"])(vt,pt,mt,!1,null,"6c0691b7",null)),yt=bt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plugin-a"})},xt=[],kt={data:function(){return{}},methods:{}},St=kt,Ct=Object(y["a"])(St,wt,xt,!1,null,"741d069f",null),Ot=Ct.exports,It={leftSide:{icon:"el-icon-star-off",name:"插件测试",component:et},widget:{component:st,constructor:Z},controlPanel:{component:ft},bottomBar:{component:yt},extendSideBar:{icon:"el-icon-star-off",name:"插件测试",component:Ot}};N("pluginA",It);var jt=n("6ff3"),Et={};jt.keys().forEach((function(t){var e=jt(t),n=t.match(/\.\/(\S*).vue/)[1];Et[n]=e.default||e}));var _t={};Object.values(D.widget).forEach((function(t){var e=t.component,n=t.componentName;_t[n]=$(e)}));for(var Tt=Object(u["a"])(Object(u["a"])({},Et),_t),Lt={components:Object(u["a"])({vueDraggableResizable:R["a"]},Tt),mixins:[Object(M["b"])()],data:function(){return{draggable:!0}}},Rt=Lt,Mt=(n("9374"),Object(y["a"])(Rt,T,L,!1,null,"8253d21c",null)),Pt=Mt.exports,Bt=n("4fd4"),At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"draw-rect-widget"},[n("div",{staticClass:"drawing-container",class:{dragging:t.dragging},on:{mousedown:t.dragStart,mousemove:t.moving,mouseup:t.dragEnd}},[n("div",{staticClass:"tip"},[t._v("在此区域内拖动")]),t.dragging?n("div",{staticClass:"dragging-rect",style:t.draggingRectStyle},[t._v(" "+t._s(t.draggingRectStyle.width+" x "+t.draggingRectStyle.height)+" ")]):t._e()])])},Dt=[],zt=n("1613"),Nt={directives:{clickoutside:zt["a"]},props:{item:{type:Object,default:function(){return{}}}},data:function(){return{dragging:!1,drawInfo:null,draggingRectStyle:null}},computed:Object(u["a"])({},Object(d["d"])(["canvasSize"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["setWidgetConfig","removeAssistWidget","addItem"])),{},{removeSelf:function(){this.removeAssistWidget(this.item)},dragStart:function(t){this.dragging=!0,this.drawInfo={startX:t.offsetX,startY:t.offsetY,startPageX:t.pageX,startPageY:t.pageY},this.draggingRectStyle={width:0,height:0,top:t.offsetY+"px",left:t.offsetX+"px"}},moving:function(t){if(this.dragging){var e=Math.abs(t.pageX-this.drawInfo.startPageX),n=Math.abs(t.pageY-this.drawInfo.startPageY),i=t.pageY<this.drawInfo.startPageY?this.drawInfo.startY-n:this.drawInfo.startY,o=t.pageX<this.drawInfo.startPageX?this.drawInfo.startX-e:this.drawInfo.startX;this.draggingRectStyle.width=parseInt(e)+"px",this.draggingRectStyle.height=parseInt(n)+"px",this.draggingRectStyle.top=i+"px",this.draggingRectStyle.left=o+"px"}},dragEnd:function(t){if(2!==t.button){if(this.dragging){this.dragging=!1,this.drawInfo=null;var e={width:parseInt(this.draggingRectStyle.width),height:parseInt(this.draggingRectStyle.height),top:parseInt(this.draggingRectStyle.top),left:parseInt(this.draggingRectStyle.left)};this.draggingRectStyle=null,this.removeSelf(),this.addItem(new G["e"]({dragInfo:{w:Math.max(50,e.width),h:Math.max(50,e.height),y:e.top,x:e.left}}))}}else this.removeSelf()}})},Wt=Nt,Ht=(n("5473"),Object(y["a"])(Wt,At,Dt,!1,null,"24d3eadc",null)),$t=Ht.exports,Yt={components:{widgetContainer:Pt,backgroundWidget:Bt["default"],drawRectWidget:$t},data:function(){return{}},computed:Object(u["a"])({},Object(d["d"])(["posterItems","canvasSize","background","assistWidgets","pageTitle"]))},Xt=Yt,Ft=(n("2875"),Object(y["a"])(Xt,E,_,!1,null,"36f9e52c",null)),Vt=Ft.exports,Ut=n("7ea8"),Gt=n.n(Ut),qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"poster-ruler"},[t.referenceLineOpened?[t._l(t.referenceLine.col,(function(e,i){return n("div",{key:"col"+i+e,staticClass:"reference-line column",style:{left:e+"px"},on:{dblclick:function(e){return t.removeReferenceLine({type:"col",index:i})},mousedown:function(e){return t.colHandleDown(e,i)}}})})),t._l(t.referenceLine.row,(function(e,i){return n("div",{key:"row"+i+e,staticClass:"reference-line row",style:Object.assign({},{top:e+"px"},t.rowElPositionFix),on:{dblclick:function(e){return t.removeReferenceLine({type:"row",index:i})},mousedown:function(e){return t.rowHandleDown(e,i)}}})}))]:t._e(),n("div",{ref:"topRuler",staticClass:"top-ruler",on:{mouseenter:t.topMouseEnter,mousemove:t.topMouseMove,mouseleave:t.topMouseLeave,mouseup:t.topMouseUp}},[t.topMoving?n("div",{staticClass:"reference-line column",style:{left:t.columnX+"px"}},[n("div",{staticClass:"tip",attrs:{draggable:"false",ondragstart:"return false"}},[t._v(" "+t._s(t.columnXInRuler)+" ")])]):t._e()]),n("div",{ref:"leftRuler",staticClass:"left-ruler",style:t.rowElPositionFix,on:{mouseenter:t.leftMouseEnter,mousemove:t.leftMouseMove,mouseleave:t.leftMouseLeave,mouseup:t.leftMouseUp}},[t.leftMoving?n("div",{staticClass:"reference-line row moving",style:{top:t.rowY+"px"}},[n("div",{staticClass:"tip",attrs:{draggable:"false",ondragstart:"return false"}},[t._v(" "+t._s(t.rowYInRuler)+" ")])]):t._e()]),n("matched-line",{attrs:{"row-el-position-fix":t.rowElPositionFix}})],2)},Jt=[],Zt={initRow:function(t){var e={el:t.el,height:t.height||60,maxScale:t.maxScale||200,startValue:t.startValue||0,region:t.region||!1,background:t.background||!1,color:t.color||!1,markColor:t.markColor||"#FFCC33",isConstant:t.isConstant||!1,startGap:t.startGap||0},n=e.el instanceof HTMLElement?e.el:document.querySelector(e.el);if(!n)return console.warn("缺少容器"),!1;var i=n;i.style.height=e.height+"px",e.maxScale=e.maxScale<50?50:e.maxScale,e.startValue>e.maxScale&&(e.startValue=e.maxScale);var o=e.startValue,r=i.offsetWidth,a=10,s=i.getElementsByTagName("canvas")[0];s||(s=document.createElement("canvas"),s.width=r,s.height=e.height,i.appendChild(s));var c=s.getContext("2d");function l(t){c.clearRect(0,0,r,e.height),e.background&&(c.fillStyle=e.background,c.fillRect(0,0,s.width,e.height));for(var n=0;n<e.maxScale;n++){c.beginPath(),c.save(),c.strokeStyle=e.color?e.color:"#bbb",c.lineWidth=1,c.lineCap="round";var i=a*n-t*a+e.startGap;c.moveTo(i,e.height),c.lineTo(i,Math.floor(.8*e.height)),n%5===0&&(c.strokeStyle=e.color?e.color:"#666",c.lineTo(i,Math.floor(.5*e.height))),n%10===0&&(c.strokeStyle=e.color?e.color:"#666",c.font="10px Arial",c.fillStyle=e.color?e.color:"#333",c.textAlign="left",c.textBaseline="middle",c.lineTo(i,0),c.fillText(String(n*a),i+2,Math.floor(.5*e.height))),c.stroke(),c.restore(),c.closePath()}c.beginPath(),c.save(),c.strokeStyle=e.color?e.color:"#bbb",c.lineWidth=1,c.lineCap="round",c.moveTo(0,e.height-1),c.lineTo(r,e.height-1),c.stroke(),c.restore(),c.closePath()}window.devicePixelRatio&&(s.width=window.devicePixelRatio*r,s.height=window.devicePixelRatio*e.height,c.scale(window.devicePixelRatio,window.devicePixelRatio)),window.devicePixelRatio&&(s.style.transform="scale("+1/window.devicePixelRatio+")",s.style.transformOrigin="left top"),l(o)},initColumn:function(t){var e={el:t.el,width:t.width||60,maxScale:t.maxScale||200,startValue:t.startValue||0,region:t.region||!1,background:t.background||!1,color:t.color||!1,markColor:t.markColor||"#FFCC33",isConstant:t.isConstant||!1,startGap:t.startGap||0},n=e.el instanceof HTMLElement?e.el:document.querySelector(e.el);if(!n)return console.warn("缺少容器"),!1;var i=n;i.style.width=e.height+"px",e.maxScale=e.maxScale<50?50:e.maxScale,e.startValue>e.maxScale&&(e.startValue=e.maxScale);var o=e.startValue,r=i.offsetHeight,a=10,s=i.getElementsByTagName("canvas")[0];s||(s=document.createElement("canvas"),s.height=r,s.width=e.width,i.appendChild(s));var c=s.getContext("2d");function l(t){c.clearRect(0,0,e.width,r),e.background&&(c.fillStyle=e.background,c.fillRect(0,0,s.width,r));for(var n=0;n<e.maxScale;n++){c.beginPath(),c.save(),c.strokeStyle=e.color?e.color:"#bbb",c.lineWidth=1,c.lineCap="round";var i=a*n-t*a+e.startGap;c.moveTo(e.width,i),c.lineTo(Math.floor(.8*e.width),i),n%5===0&&(c.strokeStyle=e.color?e.color:"#666",c.lineTo(Math.floor(.5*e.width),i)),n%10===0&&(c.strokeStyle=e.color?e.color:"#666",c.font="10px Arial",c.fillStyle=e.color?e.color:"#333",c.textAlign="left",c.textBaseline="middle",c.lineTo(0,i),c.fillText(String(n*a),0,i+8)),c.stroke(),c.restore(),c.closePath()}c.beginPath(),c.save(),c.strokeStyle=e.color?e.color:"#bbb",c.lineWidth=1,c.lineCap="round",c.moveTo(e.width-1,0),c.lineTo(e.width-1,r),c.stroke(),c.restore(),c.closePath()}window.devicePixelRatio&&(s.height=window.devicePixelRatio*r,s.width=window.devicePixelRatio*e.width,c.scale(window.devicePixelRatio,window.devicePixelRatio)),window.devicePixelRatio&&(s.style.transform="scale("+1/window.devicePixelRatio+")",s.style.transformOrigin="left top"),l(o)}},Kt=Zt,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.matchedLine?n("div",{staticClass:"matched-line"},[t._l(t.matchedLine.col,(function(t,e){return n("div",{key:"col"+e,staticClass:"reference-line column",style:{left:t+"px"}})})),t._l(t.matchedLine.row,(function(e,i){return n("div",{key:"row"+i,staticClass:"reference-line row",style:Object.assign({},{top:e+"px"},t.rowElPositionFix)})}))],2):t._e()},te=[],ee={props:{rowElPositionFix:{type:Object,default:null}},data:function(){return{}},computed:Object(u["a"])({},Object(d["d"])(["matchedLine"])),methods:{}},ne=ee,ie=(n("9a2a"),Object(y["a"])(ne,Qt,te,!1,null,"51bcb76c",null)),oe=ie.exports,re=240,ae=21,se={components:{matchedLine:oe},data:function(){return{topMoving:!1,columnX:0,leftMoving:!1,rowY:0}},computed:Object(u["a"])(Object(u["a"])({},Object(d["d"])(["referenceLine","referenceLineOpened","mainPanelScrollY"])),{},{columnXInRuler:function(){return this.columnX-ae},rowYInRuler:function(){return this.rowY-50},rowElPositionFix:function(){return{transform:"translateY(".concat(this.mainPanelScrollY,"px)")}}}),mounted:function(){Kt.initRow({el:this.$refs.topRuler,height:ae,color:"#bac3c9",background:"#f4f7f8",startGap:ae-1}),Kt.initColumn({el:this.$refs.leftRuler,width:ae,color:"#bac3c9",background:"#f4f7f8",startGap:49,maxScale:501})},methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["addReferenceLine","removeReferenceLine"])),{},{addColumn:function(){this.addReferenceLine({type:"col",position:this.columnX})},addRow:function(){this.addReferenceLine({type:"row",position:this.rowY})},topMouseEnter:function(t){this.topMoving=!0,this.columnX=t.pageX-re},topMouseMove:function(t){this.columnX=t.pageX-re},topMouseLeave:function(){this.colHandleMoveReady||(this.topMoving=!1)},topMouseUp:function(){this.colHandleMoveReady||this.addColumn()},leftMouseEnter:function(t){this.leftMoving=!0},leftMouseMove:function(t){this.rowY=t.pageY-this.mainPanelScrollY},leftMouseLeave:function(){this.rowHandleMoveReady||(this.leftMoving=!1)},leftMouseUp:function(){this.rowHandleMoveReady||this.addRow()},colHandleDown:function(t,e){var n=this;this.colHandleMoveReady=!0;var i=!1;document.body.style.cursor="col-resize";var o=function(t){i||(n.removeReferenceLine({type:"col",index:e}),n.topMouseEnter(t),i=!0),n.topMouseMove(t)},r=function t(){i&&n.addColumn(),n.colHandleMoveReady=!1,n.topMouseLeave(),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",o),document.body.style.cursor="initial"};document.addEventListener("mousemove",o),document.addEventListener("mouseup",r)},rowHandleDown:function(t,e){var n=this;this.rowHandleMoveReady=!0;var i=!1;document.body.style.cursor="row-resize";var o=function(t){i||(n.removeReferenceLine({type:"row",index:e}),n.leftMouseEnter(t),i=!0),n.leftMouseMove(t)},r=function t(){i&&n.addRow(),n.rowHandleMoveReady=!1,n.leftMouseLeave(),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",o),document.body.style.cursor="initial"};document.addEventListener("mousemove",o),document.addEventListener("mouseup",r)}})},ce=se,le=(n("b17a"),Object(y["a"])(ce,qt,Jt,!1,null,"38d65632",null)),ue=le.exports,de=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-bar"},[n("div",{staticClass:"left"},[n("div",{staticClass:"canvas-size"},[t._v(" 画布大小: "),n("span",[t._v(t._s("宽"+t.canvasSize.width+"px"))]),n("span",[t._v(t._s("高"+t.canvasSize.height+"px"))]),n("el-popover",{attrs:{placement:"top",title:"修改画布大小",width:"200",trigger:"click",transition:"el-zoom-in-center"}},[n("change-size"),n("button",{staticClass:"change-size",attrs:{slot:"reference",title:"编辑画布"},slot:"reference"},[n("i",{staticClass:"el-icon-s-tools"}),t._v(" 编辑画布 ")])],1)],1),t._l(t.pluginNames,(function(t){return n(t,{key:t,tag:"component"})}))],2),n("div",{staticClass:"widget-count"},[n("span",[t._v(t._s("元素数量："+t.posterItemIds.length))])])])},he=[],fe=n("6d83"),pe=(n("17c9"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"change-size"},[n("div",{staticClass:"item",attrs:{title:"无法修改宽度"}},[n("span",{staticClass:"label"},[t._v("宽度")]),n("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",size:"mini",disabled:""},model:{value:t.width,callback:function(e){t.width=t._n(e)},expression:"width"}})],1),n("div",{staticClass:"item"},[n("span",{staticClass:"label"},[t._v("高度")]),n("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",size:"mini"},model:{value:t.height,callback:function(e){t.height=t._n(e)},expression:"height"}})],1),n("el-button",{attrs:{size:"mini"},on:{click:t.save}},[t._v("确定")])],1)}),me=[],ge={data:function(){return{width:0,height:0}},computed:Object(u["a"])({},Object(d["d"])({canvasWidth:function(t){return t.canvasSize.width},canvasHeight:function(t){return t.canvasSize.height}})),methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["setCanvasSize","seekBackgroundSize"])),{},{save:function(){this.width&&this.height&&(this.setCanvasSize({width:this.width,height:this.height}),this.seekBackgroundSize())}}),created:function(){this.width=this.canvasWidth,this.height=this.canvasHeight}},ve=ge,be=(n("b8e3"),Object(y["a"])(ve,pe,me,!1,null,"da14b556",null)),ye=be.exports,we={},xe=[],ke=0,Se=Object.entries(D.bottomBar);ke<Se.length;ke++){var Ce=Object(fe["a"])(Se[ke],2),Oe=Ce[0],Ie=Ce[1],je=Ie.component;we[Oe]=$(je),xe.push(Oe)}var Ee={components:Object(u["a"])({changeSize:ye},we),data:function(){return{}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(d["d"])(["canvasSize"])),Object(d["b"])(["posterItemIds"])),{},{pluginNames:function(){return xe}}),methods:{}},_e=Ee,Te=(n("798b"),Object(y["a"])(_e,de,he,!1,null,"857b3054",null)),Le=Te.exports,Re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"custom-contextmenu",style:t.menuStyle},[n("ul",t._l(t.menuList,(function(e){return n("li",{key:e.command,style:e.style,on:{click:function(n){return n.stopPropagation(),t.command(e)}}},[n("span",[t._v(t._s(e.label))])])})),0)])},Me=[],Pe=(n("0a53"),{props:{x:{type:Number,default:0},y:{type:Number,default:0},menuList:{type:Array,default:function(){return[]}}},data:function(){return{height:0}},computed:{menuStyle:function(){var t=this.y;return t>this.maxTop&&(t-=this.height),{height:this.height+"px",left:this.x+4+"px",top:t+4+"px"}}},watch:{menuList:{handler:function(t){this.height=32*t.length,this.maxTop=document.body.clientHeight-this.height},immediate:!0}},methods:{command:function(t){this.$emit("executeCommand",t)}}}),Be=Pe,Ae=(n("8967"),Object(y["a"])(Be,Re,Me,!1,null,"76d46348",null)),De=Ae.exports,ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"functional-bar"},[n("ul",[n("li",{staticClass:"github"},[n("el-tooltip",{attrs:{effect:"dark",content:"希望大佬们能给我点颗星⭐",placement:"bottom",transition:"el-zoom-in-center"}},[n("span",[n("a",{attrs:{href:"https://github.com/a7650/h5-editor",target:"blank"}},[t._v("GitHub")])])])],1),n("li",{on:{click:t.savePage}},[n("i",{staticClass:"el-icon-upload"}),n("span",[n("el-badge",{attrs:{"is-dot":"",hidden:!t.isUnsavedState}},[t._v(" "+t._s(t.savePageLoading?"正在保存":"保存页面")+" ")])],1)]),n("li",{on:{click:t.closeEditor}},[n("i",{staticClass:"el-icon-circle-close"}),n("span",[t._v("关闭编辑器")])])])])},Ne=[],We={data:function(){return{savePageLoading:!1}},computed:Object(u["a"])({},Object(d["d"])(["isUnsavedState","posterItems"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["saveActivityPageConfig"])),{},{closeEditor:function(){this.$router.back()},savePage:function(){var t=this;this.savePageLoading||(0!==this.posterItems.length?(this.savePageLoading=!0,this.saveActivityPageConfig().finally((function(){t.savePageLoading=!1}))):this.$message.error("当前画布中未添加任何元素，请添加后再提交"))}})},He=We,$e=(n("ef22"),Object(y["a"])(He,ze,Ne,!1,null,"0ce175e5",null)),Ye=$e.exports,Xe=n("95ea"),Fe=n("1fd4"),Ve=n("9e4b"),Ue={components:{mainPanel:Vt,rulerComponent:ue,bottomBar:Le,customContextmenu:De,functionalBar:Ye},directives:{clickoutside:zt["a"]},data:function(){return{count:1,maskBorderWidth:"",maskHeight:0,contextmenuVisible:!1,contextmenuPosition:{x:0,y:0},menuList:[]}},computed:Object(u["a"])(Object(u["a"])({},Object(d["d"])(["canvasSize","mainPanelScrollY"])),{},{maskStyle:function(){return{height:this.maskHeight+"px",borderWidth:this.maskBorderWidth,transform:"translateY(".concat(this.mainPanelScrollY,"px)")}}}),watch:{canvasSize:{handler:function(){var t=this;this.getMaskSize(),setTimeout((function(){t.BScroll.refresh()}),500)},deep:!0}},mounted:function(){this.getMaskSizeThrottle=Gt()(this.getMaskSize,300),window.addEventListener("resize",this.getMaskSizeThrottle),this.getMaskSize(),this.initScroll()},beforeDestroy:function(){window.removeEventListener("resize",this.getMaskSizeThrottle)},methods:Object(u["a"])(Object(u["a"])({},Object(d["c"])(["SET_CANVAS_POSITION","SET_SCROLL_Y"])),{},{getMaskSize:function(){var t=this.$refs.main,e=(t.clientWidth-this.canvasSize.width)/2,n=50,i=Math.max(50,t.clientHeight-n-this.canvasSize.height);this.maskBorderWidth="".concat(50,"px ",Math.max(0,e),"px ").concat(i,"px ").concat(Math.max(0,e),"px"),this.maskHeight=Math.max(t.clientHeight,this.canvasSize.height+100);var o={top:50,left:(t.clientWidth-this.canvasSize.width)/2};this.SET_CANVAS_POSITION(o)},openContextmenu:function(t){var e=t.x,n=t.y,i=t.menuList,o=t.vm;this.contextmenuPosition.x=e,this.contextmenuPosition.y=n,this.menuList=i,this._currentContextmenuWidgetVm=o,this.contextmenuVisible=!0},closeContextmenu:function(){this.contextmenuVisible=!1},executeContextCommand:function(t){this.closeContextmenu();var e=this._currentContextmenuWidgetVm;e&&e._executeContextCommand&&e._executeContextCommand(t)},initScroll:function(){var t=this;Xe["a"].use(Fe["a"]),Xe["a"].use(Ve["a"]),this.BScroll=new Xe["a"](this.$refs.mainPanelScrollContent,{mouseWheel:!0,scrollbar:!0,bounce:!1,probeType:2}),this.BScroll.on("mousewheelMove",(function(e){var n=e.y;t.SET_SCROLL_Y(n)})),this.BScroll.on("scroll",(function(e){var n=e.y;t.SET_SCROLL_Y(n)}))}})},Ge=Ue,qe=(n("df7b"),Object(y["a"])(Ge,I,j,!1,null,"dc1dae02",null)),Je=qe.exports,Ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"left-side"},[n("ul",{staticClass:"widget-list"},t._l(t.widgets,(function(e){return n("li",{key:e.type,on:{click:function(n){t.current=e}}},[n("el-tooltip",{staticClass:"widget-item",class:{active:t.current.type===e.type},attrs:{effect:"dark",content:e.name,placement:"right",transition:"el-zoom-in-center"}},[n("i",{class:e.icon})])],1)})),0),t.current?n("div",{staticClass:"widget-container"},[n(t.current.component,{key:t.current.component,tag:"component"})],1):t._e()])},Ke=[],Qe=(n("b8bb"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-image-widget"},[n("el-button",{staticClass:"add-image",attrs:{size:"mini",type:"plain"},on:{click:t.selectImgHandler}},[t._v("添加图片")]),n("input",{ref:"input",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.selectImg}})],1)}),tn=[];n("3e1c"),n("f6a2"),n("31c9"),n("f526"),n("0119"),n("59c0"),n("fce1"),n("8909"),n("c473"),n("175e"),n("9aa3"),n("a260"),n("8ee0"),n("d3c1"),n("bcad"),n("4f9b"),n("f5b9"),n("60f4"),n("b629"),n("11dc"),n("1202"),n("9d2a"),n("07df"),n("402b"),n("565e"),n("fd48"),n("4732"),n("e90a"),n("e49d");function en(t){var e=5,n=1024*e*1e3;return new Promise((function(i,o){if(t){var r=new FileReader;r.onload=function(){i({src:r.result,file:t})},r.onerror=o,/image/.test(t.type)?["jpg","png","JPG","PNG"].includes(t.name.replace(/.+\./,""))?t.size>n?alert("图片体积过大,请控制在".concat(e,"以内")):r.readAsDataURL(t):alert("请选择正确格式的图片(*.jpg或*.png格式)"):alert("请选择图片文件(*.jpg或*.png格式,".concat(e,"MB以内)"))}else o()}))}function nn(t){return console.log("页面配置已上传---本地测试用",t),Promise.resolve()}function on(t){return console.log("图片已上传---本地测试用"),new Promise((function(e,n){var i=new FileReader;i.onload=function(){e(i.result)},i.onerror=n,i.readAsDataURL(t)}))}for(var rn={data:function(){return{}},methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["addItem"])),{},{selectImgHandler:function(){this.$refs.input.click()},selectImg:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var i,o,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.currentTarget,n.prev=1,o=i.files,r=o&&o[0],n.next=6,en(r);case 6:return n.next=8,on(r);case 8:a=n.sent,e.addImage({src:a}),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](1),console.error(n.t0);case 15:return n.prev=15,i.value="",n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,12,15,18]])})))()},addImage:function(t){var e=t.src;this.addItem(new G["d"]({wState:{src:e}}))}})},an=rn,sn=(n("17a6"),Object(y["a"])(an,Qe,tn,!1,null,"c0fa39f2",null)),cn=sn.exports,ln=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-background-widget"},[n("div",{staticClass:"title"},[t._v("纯色背景")]),n("el-color-picker",{attrs:{"show-alpha":"",size:"mini"},on:{change:t.backgroundColorChange},model:{value:t.backgroundColor,callback:function(e){t.backgroundColor=e},expression:"backgroundColor"}}),n("div",{staticClass:"title"},[t._v("推荐颜色")]),n("div",{staticClass:"recommend-color"},[n("ul",t._l(t.recommendColor,(function(e,i){return n("li",{key:i,style:{backgroundColor:"rgb("+e+")"},on:{click:function(n){t.selectRecommend("rgb("+e+")")}}})})),0)]),n("div",{staticClass:"title"},[t._v("图片背景")]),n("el-button",{staticClass:"add-image",attrs:{size:"mini",type:"plain"},on:{click:t.selectImgHandler}},[t._v("添加背景图片")]),n("input",{ref:"input",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.selectImg}})],1)},un=[],dn={data:function(){return{backgroundColor:"",recommendColor:["232,221,203","205,179,128","3,101,100","3,54,73","3,22,52","255,67,101","252,157,153","249,204,173","201,200,170","132,175,155","17,63,61","60,79,57","95,92,51","179,214,110","248,147,29","227,160,92","178,190,126","114,111,128","57,13,49","90,61,66"]}},computed:Object(u["a"])({},Object(d["d"])(["canvasSize"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["addBackground"])),{},{backgroundColorChange:function(){this.addBackground(new G["a"]({lock:!0,wState:{isSolid:!0,style:{backgroundColor:this.backgroundColor}}}))},selectRecommend:function(t){this.backgroundColor=t,this.backgroundColorChange()},selectImgHandler:function(){this.$refs.input.click()},selectImg:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var i,o,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.currentTarget,n.prev=1,o=i.files,r=o&&o[0],n.next=6,en(r);case 6:return n.next=8,on(r);case 8:a=n.sent,e.addBackground(new G["a"]({wState:{src:a,isSolid:!1}})),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](1),console.error(n.t0);case 15:return n.prev=15,i.value="",n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,12,15,18]])})))()}})},hn=dn,fn=(n("9a59"),Object(y["a"])(hn,ln,un,!1,null,"21eea1f2",null)),pn=fn.exports,mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-text-widget"},[n("ul",t._l(t.presuppositionTextList,(function(e,i){return n("li",{key:i,staticClass:"presupposition-item",style:e.style,on:{click:function(n){return t.addText(e)}}},[t._v(" "+t._s("添加"+e.text)+" ")])})),0),n("el-button",{staticClass:"add-text",attrs:{size:"mini",type:"plain"},on:{click:function(e){return t.addText(null)}}},[t._v("添加文本")])],1)},gn=[],vn={data:function(){return{presuppositionTextList:[{text:"标题",style:{fontSize:"24px"}},{text:"副标题",style:{fontSize:"18px"}},{text:"正文内容",style:{fontSize:"14px"}},{text:"粗体文本",style:{fontSize:"14px",fontWeight:"bold"}},{text:"斜体文本",style:{fontSize:"14px",fontStyle:"italic"}}]}},methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["addItem"])),{},{addText:function(t){t?this.addItem(new G["f"]({wState:t})):this.addItem(new G["f"])}})},bn=vn,yn=(n("282c"),Object(y["a"])(bn,mn,gn,!1,null,"19a1bdaa",null)),wn=yn.exports,xn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-text-widget"},[n("el-button",{staticClass:"add-text",attrs:{size:"mini",type:"plain"},on:{click:t.addRect}},[t._v("添加矩形")])],1)},kn=[],Sn={data:function(){return{recommendList:[]}},methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["addAssistWidget"])),{},{addRect:function(){this.addAssistWidget(new G["c"])}})},Cn=Sn,On=(n("c84b"),Object(y["a"])(Cn,xn,kn,!1,null,"63e6b34c",null)),In=On.exports,jn=[],En={},_n=0,Tn=Object.entries(D.leftSide);_n<Tn.length;_n++){var Ln=Object(fe["a"])(Tn[_n],2),Rn=Ln[0],Mn=Ln[1],Pn=Mn.name,Bn=Mn.icon,An=Mn.component;jn.push({type:Rn,component:Rn,name:Pn,icon:Bn}),En[Rn]=$(An)}var Dn={components:Object(u["a"])({imageWidget:cn,backgroundWidget:pn,textWidget:wn,rectWidget:In},En),data:function(){return{current:null,widgets:[{type:"image",component:"image-widget",name:"图片",icon:"el-icon-picture"},{type:"background",component:"background-widget",name:"背景",icon:"icon-background"},{type:"text",component:"text-widget",name:"文本",icon:"icon-text"},{type:"rect",component:"rect-widget",name:"矩形",icon:"icon-rect"}].concat(jn)}},created:function(){this.current=this.widgets[0],this.init()},methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["addBackground"])),{},{init:function(){this.addBackground(new G["a"]({backgroundColor:"#fff",isSolid:!0,lock:!0}))}})},zn=Dn,Nn=(n("6720"),Object(y["a"])(zn,Ze,Ke,!1,null,"238ca7f4",null)),Wn=Nn.exports,Hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"extend-side-bar"},[n("div",{staticClass:"list"},[n("el-tooltip",{attrs:{effect:"dark",content:"撤销 ctrl+z",placement:"left",transition:"el-zoom-in-center"}},[n("div",{staticClass:"item",class:{disabled:!t.couldUndo},on:{click:t.undo}},[n("i",{staticClass:"icon-undo"})])]),n("el-tooltip",{attrs:{effect:"dark",content:"恢复 ctrl+shift+z",placement:"left",transition:"el-zoom-in-center"}},[n("div",{staticClass:"item",class:{disabled:!t.couldRedo},staticStyle:{transform:"rotateY(180deg)"},on:{click:t.redo}},[n("i",{staticClass:"icon-undo"})])]),n("el-tooltip",{attrs:{effect:"dark",content:"图层面板 ctrl+L",placement:"left",transition:"el-zoom-in-center"}},[n("div",{staticClass:"item",class:{active:t.layerPanelOpened},on:{click:t.openLayer}},[n("i",{staticClass:"icon-layer"})])]),n("el-tooltip",{attrs:{effect:"dark",content:"参考线 ctrl+h",placement:"left",transition:"el-zoom-in-center"}},[n("el-popover",{attrs:{placement:"left",title:"参考线",width:"200",trigger:"click",transition:"el-zoom-in-center"}},[n("reference-line"),n("div",{staticClass:"item",attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"icon-grid"})])],1)],1),t.useBackup?n("el-tooltip",{attrs:{effect:"dark",content:"数据备份 ctrl+s",placement:"left",transition:"el-zoom-in-center"}},[n("div",{staticClass:"item",on:{click:function(e){return t.openSettingCenter("dataBackup")}}},[n("i",{staticClass:"el-icon-document-copy"})])]):t._e(),n("el-tooltip",{attrs:{effect:"dark",content:"生成H5代码（Beta）",placement:"left",transition:"el-zoom-in-center"}},[n("div",{staticClass:"item",on:{click:t.exportH5}},[n("i",{staticClass:"icon-h5"})])]),n("el-tooltip",{attrs:{effect:"dark",content:"快捷键参考",placement:"left",transition:"el-zoom-in-center"}},[n("div",{staticClass:"item",on:{click:function(e){return t.openSettingCenter("shortcut")}}},[n("i",{staticClass:"el-icon-thumb"})])]),n("el-tooltip",{attrs:{effect:"dark",content:"编辑器设置",placement:"left",transition:"el-zoom-in-center"}},[n("div",{staticClass:"item",on:{click:t.openSettingCenter}},[n("i",{staticClass:"el-icon-set-up"})])]),t._l(t.plugins,(function(t){return n("el-tooltip",{key:t.name,attrs:{effect:"dark",content:t.name,placement:"left",transition:"el-zoom-in-center"}},[n("div",{staticClass:"item"},[n("i",{class:t.icon})])])}))],2),n("el-dialog",{attrs:{visible:t.settingCenterVisible,title:"设置",width:"600px","append-to-body":"",transition:"el-zoom-in-center"},on:{"update:visible":function(e){t.settingCenterVisible=e}}},[n("setting-center",{ref:"settingCenter"})],1)],1)},$n=[],Yn=(n("3a06"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reference-line-setting"},[n("div",[n("span",[t._v(" 打开参考线 ")]),n("el-switch",{model:{value:t.referenceLineOpened,callback:function(e){t.referenceLineOpened=e},expression:"referenceLineOpened"}})],1),n("div",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.removeAll}},[t._v("清空参考线")])],1)])}),Xn=[],Fn={computed:{referenceLineOpened:{get:function(){return this.$store.state.poster.referenceLineOpened},set:function(t){this.$store.dispatch("poster/setReferenceLineVisible",t)}}},methods:{removeAll:function(){this.$store.dispatch("poster/removeAllReferenceLine")}}},Vn=Fn,Un=(n("ba5e"),Object(y["a"])(Vn,Yn,Xn,!1,null,"3e1e90be",null)),Gn=Un.exports,qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting-center"},[n("el-tabs",{staticStyle:{height:"300px"},attrs:{"tab-position":"left"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"撤销设置",name:"undo"}},[n("undo")],1),t.useBackup?n("el-tab-pane",{attrs:{label:"数据备份",name:"dataBackup"}},[n("data-backup")],1):t._e(),n("el-tab-pane",{attrs:{label:"快捷键参考",name:"shortcut"}},[n("shortcut")],1)],1)],1)},Jn=[],Zn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"data-backup"},[n("el-form",{attrs:{size:"small"}},[n("el-form-item",{attrs:{label:"打开自动备份"}},[n("el-checkbox",{model:{value:t.autoSave,callback:function(e){t.autoSave=e},expression:"autoSave"}})],1),n("el-form-item",{attrs:{label:"自动备份时间间隔"}},[n("el-select",{attrs:{placeholder:"请选择",disabled:!t.autoSave},model:{value:t.autoSaveDivision,callback:function(e){t.autoSaveDivision=e},expression:"autoSaveDivision"}},t._l(t.autoSaveDivisionOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t.autoSaveDivision?t._e():n("div",{staticStyle:{"font-size":"12px"}},[t._v(" 系统会根据你的操作自动进行备份 ")])],1),n("el-form-item",{attrs:{label:"备份记录"}},[n("span",[t._v(t._s("上次备份："+(t.lastBackupTime||"无")))]),t.lastBackup?n("span",{staticClass:"recover",on:{click:function(e){return t.recover(null)}}},[t._v("恢复数据")]):t._e()])],1),n("el-alert",{attrs:{title:"注意",type:"warning",closable:!1,description:"由于数据保存在本地，更换浏览器或清除缓存将会失去备份的数据","show-icon":""}})],1)},Kn=[],Qn={data:function(){return{autoSaveDivisionOptions:[{label:"智能备份",value:""},{label:"5分钟",value:3e5},{label:"10分钟",value:6e5},{label:"20分钟",value:12e5},{label:"30分钟",value:18e5}]}},computed:Object(u["a"])(Object(u["a"])({},Object(d["d"])({_autoSave:function(t){return t.backup.autoSave},_autoSaveDivision:function(t){return t.backup.autoSaveDivision},lastBackup:function(t){return t.backup.lastBackup}})),{},{autoSave:{get:function(){return this._autoSave},set:function(t){this.toggleAutoSave(t)}},autoSaveDivision:{get:function(){return this._autoSaveDivision},set:function(t){this.changeAutoSaveDivision(t)}},lastBackupTime:function(){return this.lastBackup?this.$moment(this.lastBackup.createTime).format("MM-DD HH:mm:ss"):null}}),watch:{autoSaveDivision:{handler:function(t){}}},methods:Object(u["a"])({},Object(d["a"])({toggleAutoSave:"backup/toggleAutoSave",changeAutoSaveDivision:"backup/changeAutoSaveDivision",recover:"backup/recover"}))},ti=Qn,ei=(n("8e5c"),Object(y["a"])(ti,Zn,Kn,!1,null,"b7f2f69e",null)),ni=ei.exports,ii=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"undo"},[n("el-form",{attrs:{size:"small"}},[n("el-form-item",{attrs:{label:"撤销/恢复操作步数"}},[n("el-input",{attrs:{type:"number"},model:{value:t.maxHistoryStackLength,callback:function(e){t.maxHistoryStackLength=t._n(e)},expression:"maxHistoryStackLength"}})],1)],1),n("el-alert",{attrs:{type:"info",closable:!1,description:"若编辑器卡顿，可尝试调低该属性","show-icon":""}})],1)},oi=[],ri={data:function(){return{}},computed:Object(u["a"])(Object(u["a"])({},Object(d["d"])({maxHistory:function(t){return t.history.maxHistoryStackLength}})),{},{maxHistoryStackLength:{get:function(){return this.maxHistory},set:function(t){this.setMaxHistory(t)}}}),methods:Object(u["a"])({},Object(d["a"])({setMaxHistory:"history/setMaxHistory"}))},ai=ri,si=(n("26cb"),Object(y["a"])(ai,ii,oi,!1,null,"6ccd444e",null)),ci=si.exports,li=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ui=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shortcut"},[n("section",[n("div",{staticClass:"title"},[t._v("基础")]),n("div",{staticClass:"content"},[n("ul",[n("li",[n("b",[t._v("ctrl + z")]),n("span",[t._v("撤销操作")])]),n("li",[n("b",[t._v("ctrl + shift + z")]),n("span",[t._v("恢复操作")])]),n("li",[n("b",[t._v("ctrl + L")]),n("span",[t._v("打开/关闭图层面板")])]),n("li",[n("b",[t._v("ctrl + h")]),n("span",[t._v("打开/关闭参考线")])]),n("li",[n("b",[t._v("ctrl + s")]),n("span",[t._v("备份数据")])])])])]),n("section",[n("div",{staticClass:"title"},[t._v("组件操作相关")]),n("div",{staticClass:"content"},[n("ul",[n("li",[n("b",[t._v("ctrl + c")]),n("span",[t._v("复制组件")])]),n("li",[n("b",[t._v("ctrl + v")]),n("span",[t._v("粘贴组件")])]),n("li",[n("b",[t._v("ctrl + 点击组件（或图层面板中的组件）")]),n("span",[t._v("多选")])]),n("li",[n("b",[t._v("ctrl + 拖动组件")]),n("span",[t._v("快速复制组件")])]),n("li",[n("b",[t._v("拖动时 + alt")]),n("span",[t._v("关闭校准参考线以及自动吸附")])])])])])])}],di={data:function(){return{}},methods:{}},hi=di,fi=(n("4a7a"),Object(y["a"])(hi,li,ui,!1,null,"3f05a73a",null)),pi=fi.exports,mi={components:{dataBackup:ni,undo:ci,shortcut:pi},data:function(){return{activeTab:"undo"}},computed:{useBackup:function(){return this.$store.state.poster.backup.useBackup}},methods:{}},gi=mi,vi=(n("ad94"),Object(y["a"])(gi,qn,Jn,!1,null,"945e328a",null)),bi=vi.exports,yi=n("b42e"),wi=n("31bf"),xi=n("c9a6");function ki(){return P["a"].state.poster.posterItems}for(var Si='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Document</title><style>*{ padding:0;margin:0;}#container{overflow:hidden;width:100%;height:0;position:absolute;padding-top:#{containerPaddingTop}#}</style></head>\n<body><div id="container">#{containerInnerHtml}#</div></body></html>',Ci=function(){function t(){Object(F["a"])(this,t)}return Object(yi["a"])(t,null,[{key:"exportH5",value:function(){var t=ki(),e=P["a"].state.poster.background,n=e._codeGen(e),i=P["a"].state.poster.canvasSize,o="";t.forEach((function(t){t.visible&&t._codeGen&&(o+=t._codeGen(t,"h5")||"")}));var r=Si.replace("#{containerPaddingTop}#","".concat(100*i.height/i.width,"%")).replace("#{containerInnerHtml}#",n+o),a=new Blob([r],{type:"text/html"});Object(wi["saveAs"])(a,"index.html")}},{key:"exportPoster",value:function(){var t=ki(),e=P["a"].state.poster.background,n=e._codeGen(e,"poster"),i=P["a"].state.poster.canvasSize,o="";t.forEach((function(t){t.visible&&t._codeGen&&(o+=t._codeGen(t)||"")}));var r=Object(xi["f"])({tag:"div",style:{position:"absolute",width:i.width+"px",height:i.height+"px"}}),a=document.createElement("div"),s=document.createElement("div");a.innerHTML=n,s.innerHTML=o,r.appendChild(a),r.appendChild(s),Object(xi["h"])(r,{width:i.width,height:i.height}).then((function(t){Object(wi["saveAs"])(Object(xi["e"])(t.src),"poster.png")}))}}]),t}(),Oi={},Ii=[],ji=0,Ei=Object.entries(D.extendSideBar);ji<Ei.length;ji++){var _i=Object(fe["a"])(Ei[ji],2),Ti=_i[0],Li=_i[1],Ri=Li.component;Oi[Ti]=$(Ri),Ii.push(Li)}var Mi={components:{referenceLine:Gn,settingCenter:bi},data:function(){return{settingCenterVisible:!1}},computed:Object(u["a"])(Object(u["a"])({},Object(d["d"])({layerPanelOpened:"layerPanelOpened",couldRedo:function(t){return t.history.nextStack.length>0},couldUndo:function(t){return t.history.preStack.length>0},useBackup:function(t){return t.backup.useBackup}})),{},{plugins:function(){return Object.freeze(Ii)}}),methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])({undo:"history/undo",redo:"history/redo"})),{},{exportH5:function(){Ci.exportH5()},exportPoster:function(){Ci.exportPoster()},openLayer:function(){this.$store.dispatch("poster/setLayerPanel",!this.layerPanelOpened)},openSettingCenter:function(t){var e=this;this.settingCenterVisible=!0,this.$nextTick((function(){"string"===typeof t&&e.$refs.settingCenter&&i["default"].set(e.$refs.settingCenter,"activeTab",t)}))}})},Pi=Mi,Bi=(n("892a"),Object(y["a"])(Pi,Hn,$n,!1,null,"febf67ec",null)),Ai=Bi.exports,Di=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layer-panel poster-editor_deactivated-ignore",attrs:{id:"layer-panel"}},[n("div",{directives:[{name:"drag",rawName:"v-drag:#layer-panel",arg:"#layer-panel"}],staticClass:"header"},[n("div",{staticClass:"title"},[t._v("图层面板")]),n("i",{staticClass:"el-icon-close",on:{click:t.close}})]),n("div",{staticClass:"content"},[n("el-scrollbar",{ref:"scrollContainer",staticClass:"scroll-container",attrs:{vertical:!0}},[n("draggable",{staticClass:"draggable-container",attrs:{options:{animation:200}},model:{value:t.inPosterItems,callback:function(e){t.inPosterItems=e},expression:"inPosterItems"}},t._l(t.inPosterItems,(function(e){return n("panel-item",{directives:[{name:"show",rawName:"v-show",value:e.layerPanelVisible,expression:"item.layerPanelVisible"}],key:e.id,staticClass:"item",class:{selected:t.activeItemIds.includes(e.id)},attrs:{item:e}})})),1)],1)],1)])},zi=[],Ni=n("3335"),Wi=n.n(Ni),Hi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-item",on:{click:t.select}},[n("i",{staticClass:"icon",class:t.item.icon,attrs:{title:t.item.typeLabel}}),t.isEditing?n("input",{directives:[{name:"model",rawName:"v-model",value:t.rename,expression:"rename"},{name:"clickoutside",rawName:"v-clickoutside",value:t.saveName,expression:"saveName"}],staticClass:"name",attrs:{type:"text",ondragstart:"return false"},domProps:{value:t.rename},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveName.apply(null,arguments)},input:function(e){e.target.composing||(t.rename=e.target.value)}}}):n("div",{staticClass:"name",on:{dblclick:function(e){t.isEditing=!0}}},[t._v(" "+t._s(t.rename)+" ")]),n("div",{staticClass:"handle"},[n("i",{staticClass:"el-icon-delete-solid remove",attrs:{title:t.item.lock?"已锁定，无法删除":"删除"},on:{click:function(e){return e.stopPropagation(),t.remove.apply(null,arguments)}}}),t.item.lock?n("i",{staticClass:"el-icon-lock",attrs:{title:"解除锁定"},on:{click:function(e){return e.stopPropagation(),t.unlock.apply(null,arguments)}}}):n("i",{staticClass:"el-icon-unlock",attrs:{title:"锁定"},on:{click:function(e){return e.stopPropagation(),t.lock.apply(null,arguments)}}}),n("i",{staticClass:"el-icon-view",class:{hide:!t.item.visible},attrs:{title:"隐藏"},on:{click:function(e){return e.stopPropagation(),t.hide.apply(null,arguments)}}})])])},$i=[],Yi={directives:{clickoutside:zt["a"]},props:{item:{type:Object,default:function(){return{}}}},data:function(){return{rename:"",isEditing:!1}},computed:Object(u["a"])({},Object(d["b"])(["activeItemIds"])),created:function(){"text"===this.item.type?this.rename=this.item.wState.text:this.rename=this.item.id},methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["removeItem","lockItem","unlockItem","toggleItemVisible","replaceActiveItems","addActiveItem","removeActiveItem"])),{},{saveName:function(){this.isEditing=!1},select:function(t){this.isEditing||(t.ctrlKey?this.activeItemIds.includes(this.item.id)?this.removeActiveItem(this.item):this.addActiveItem(this.item):this.replaceActiveItems([this.item]))},remove:function(){this.removeItem(this.item)},lock:function(){this.lockItem(this.item)},unlock:function(){this.unlockItem(this.item)},hide:function(){this.toggleItemVisible({item:this.item,visible:!this.item.visible})}})},Xi=Yi,Fi=(n("a79d"),Object(y["a"])(Xi,Hi,$i,!1,null,"3dbbbaba",null)),Vi=Fi.exports,Ui={components:{draggable:Wi.a,panelItem:Vi},directives:{drag:zt["b"]},data:function(){return{}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(d["d"])(["posterItems"])),Object(d["b"])(["activeItemIds"])),{},{inPosterItems:{get:function(){return Object(c["a"])(this.posterItems).reverse()},set:function(t){this.replacePosterItems(Object(c["a"])(t).reverse())}}}),methods:Object(u["a"])(Object(u["a"])({},Object(d["a"])(["setLayerPanel","replacePosterItems"])),{},{close:function(){this.setLayerPanel(!1)}})},Gi=Ui,qi=(n("e5ca"),Object(y["a"])(Gi,Di,zi,!1,null,"1f1677be",null)),Ji=qi.exports,Zi=n("8955"),Ki=(n("403c"),n("65ff"),n("4820"),"SET_ACTIVITY_ID"),Qi="SET_PAGE_CONFIG_ID",to="SET_UNSAVED_STATE",eo="SET_PAGE_TITLE",no="SET_CANVAS_POSITION",io="ADD_BACKGROUND",oo="REMOVE_BACKGROUND",ro="SET_BACKGROUND_CONFIG",ao="ADD_ITEM",so="REMOVE_ITEM",co="REPLACE_POSTER_ITEMS",lo="SET_WIDGET_CONFIG",uo="COPY_WIDGET",ho="PASTE_WIDGET",fo="ADD_ACTIVE_ITEM",po="REMOVE_ACTIVE_ITEM",mo="REPLACE_ACTIVE_ITEMS",go="ADD_ASSIST_WIDGET",vo="REMOVE_ASSIST_WIDGET",bo="REPLACE_ASSIST_WIDGETS",yo="SET_LAYER_PANEL",wo="SET_REFERENCE_LINE_VISIBLE",xo="ADD_REFERENCE_LINE",ko="REMOVE_REFERENCE_LINE",So="REMOVE_ALL_REFERENCE_LINE",Co="SET_MATCHED_LINE",Oo="REMOVE_MATCHED_LINE",Io=Object.prototype.toString;function jo(t){return"[object Object]"===Io.call(t)}var Eo=n("2574"),_o=n.n(Eo);function To(t,e,n){var i=t[0].dragInfo.x,o=t[0].dragInfo.x;switch(t.forEach((function(t){i=Math.min(i,t.dragInfo.x),o=Math.max(o,t.dragInfo.x)})),e){case"alignLeft":t.forEach((function(t){t.dragInfo.x=i}));break;case"alignCenter":t.forEach((function(t){t.dragInfo.x=(n.width-t.dragInfo.w)/2}));break;case"alignRight":t.forEach((function(t){t.dragInfo.x=o}));break;default:return!1}return!0}function Lo(){var t={"history.maxHistoryStackLength":30,"backup.autoSave":!0,"backup.autoSaveDivision":6e5};try{var e=JSON.parse(localStorage.getItem("editorConfig"))||null;return Object.assign(t,e)}catch(n){return localStorage.removeItem("editorConfig"),console.error(n),t}}function Ro(t){var e=Lo(),n=Object.assign(e,t);return localStorage.setItem("editorConfig",JSON.stringify(n)),n}var Mo=n("0af2"),Po=n.n(Mo);function Bo(){var t=Lo(),e={maxHistoryStackLength:t["history.maxHistoryStackLength"],preStack:[],nextStack:[],lastBackupStepCount:0};return e}var Ao=Bo(),Do={current:function(t,e,n){var i=n.poster,o={background:i.background,posterItems:i.posterItems,referenceLine:i.referenceLine};return o}},zo={resetState:function(t){for(var e=t.state,n=0,i=Object.entries(Bo());n<i.length;n++){var o=Object(fe["a"])(i[n],2),r=o[0],a=o[1];e[r]=a}},setMaxHistory:function(t,e){var n=t.state,i=parseInt(e);i&&(n.maxHistoryStackLength=Math.min(50,i),Ro({"history.maxHistoryStackLength":n.maxHistoryStackLength}))},push:function(t){var e=t.state,n=t.getters,i=t.rootGetters,o=t.dispatch,r=n.current;e.preStack.push(Po()(r)),e.preStack.length>e.maxHistoryStackLength&&e.preStack.shift(),e.nextStack=[],e.lastBackupStepCount+=1,o("poster/setUnsavedState",!0,{root:!0}),i["poster/backup/smartBackup"]&&e.lastBackupStepCount>10&&o("poster/backup/invoker",!1,{root:!0})},undo:function(t){var e=t.state,n=t.rootState;if(e.preStack.length>0){var i=e.preStack.pop();e.nextStack.unshift({background:n.poster.background,posterItems:n.poster.posterItems,referenceLine:n.poster.referenceLine}),n.poster.background=i.background,n.poster.posterItems=i.posterItems,n.poster.referenceLine=i.referenceLine,n.poster.activeItems=[]}},redo:function(t){var e=t.state,n=t.rootState;if(e.nextStack.length>0){var i=e.nextStack.shift();e.preStack.push({background:n.poster.background,posterItems:n.poster.posterItems,referenceLine:n.poster.referenceLine}),n.poster.background=i.background,n.poster.posterItems=i.posterItems,n.poster.referenceLine=i.referenceLine,n.poster.activeItems=[]}}},No={namespaced:!0,state:Ao,getters:Do,actions:zo},Wo=n("5422"),Ho=n.n(Wo),$o=(n("cc6d"),function(){function t(){Object(F["a"])(this,t)}return Object(yi["a"])(t,null,[{key:"open",value:function(t,e,n){return new Promise((function(i,o){var r=window.indexedDB.open(t,e);r.onsuccess=function(){var t=r.result;i(t)},r.onupgradeneeded=function(t){var e=t.target.result;n&&n(e),i(e)},r.onerror=function(t){o()}}))}}]),t}()),Yo=null,Xo=10,Fo=1,Vo=function(){function t(){Object(F["a"])(this,t)}return Object(yi["a"])(t,null,[{key:"init",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$o.open("posterEditor",Fo,(function(t){t.objectStoreNames.contains("backup")||t.createObjectStore("backup",{keyPath:"id"})}));case 3:return Yo=t.sent,t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t["catch"](0),console.error(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"saveBackupData",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Yo.transaction("backup","readwrite"),i=n.objectStore("backup"),i.add({backupData:JSON.parse(JSON.stringify(e)),id:Object(xi["i"])(),createTime:Date.now()}),i.getAll().onsuccess=function(t){var e=t.target.result;e&&e.length>Xo&&e.sort((function(t,e){return t.createTime-e.createTime})).splice(0,e.length-Xo).forEach((function(t){var e=t.id;i.delete(e)}))},t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getBackupData",value:function(t){return new Promise((function(e,n){var i=Yo.transaction("backup","readonly"),o=i.objectStore("backup"),r=o.get(t);r.onsuccess=function(){console.log(r.result),e(r.result)},r.onerror=function(){n()}}))}},{key:"getLastBackup",value:function(){return new Promise((function(t,e){var n=Yo.transaction("backup","readonly"),i=n.objectStore("backup");i.getAll().onsuccess=function(n){var i=n.target.result;if(i&&i.length>0){var o=i.sort((function(t,e){return e.createTime-t.createTime}))[0];t(o)}else e()}}))}}]),t}(),Uo={image:G["d"],text:G["f"],background:G["a"],rect:G["e"]};function Go(){var t=Lo(),e={useBackup:!1,autoSaveTimer:null,autoSave:t["backup.autoSave"],autoSaveDivision:t["backup.autoSaveDivision"],lastBackup:null};return e}var qo,Jo=Go(),Zo={smartBackup:function(t){return t.useBackup&&t.autoSave&&!t.autoSaveDivision}},Ko={resetState:function(t){var e=t.state,n=t.dispatch;n("killAutoSaveTask");for(var i=0,o=Object.entries(Go());i<o.length;i++){var r=Object(fe["a"])(o[i],2),a=r[0],s=r[1];e[a]=s}n("init")},toggleAutoSave:function(t,e){var n=t.state,i=t.dispatch;n.autoSave=e,Ro({"backup.autoSave":e}),i(e?"startAutoSaveTask":"killAutoSaveTask")},changeAutoSaveDivision:function(t,e){var n=t.state,i=t.dispatch;n.autoSaveDivision=e,Ro({"backup.autoSaveDivision":e}),i("killAutoSaveTask"),i("startAutoSaveTask")},startAutoSaveTask:function(t){var e=t.state,n=t.dispatch;if(e.autoSave&&e.autoSaveDivision)return e.autoSaveTimer=setInterval((function(){n("invoker",!1)}),e.autoSaveDivision),function(){n("killAutoSaveTask")}},killAutoSaveTask:function(t){var e=t.state;e.autoSaveTimer&&(clearInterval(e.autoSaveTimer),e.autoSaveTimer=null)},recover:function(t,e){return Object(l["a"])(regeneratorRuntime.mark((function n(){var i,o,r,a,s,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.state,o=t.rootState,r=t.dispatch,i.lastBackup||e){n.next=3;break}return n.abrupt("return");case 3:if(n.t0=e,n.t0){n.next=8;break}return n.next=7,Vo.getBackupData(i.lastBackup.id);case 7:n.t0=n.sent.backupData;case 8:a=n.t0,a&&(s=Object(u["a"])(Object(u["a"])({},Uo),z),c=a.posterItems,l=a.background,c&&c.length>0&&(c=c.map((function(t){var e=new s[t.type](t);return e._isBackup=!0,e}))),l&&(l=new s.background(l)),r("poster/history/push",null,{root:!0}),o.poster=Object.assign({},o.poster,a,{background:l,posterItems:c}));case 10:case"end":return n.stop()}}),n)})))()},init:function(t){return Object(l["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,i=t.dispatch,e.prev=1,e.next=4,Vo.init();case 4:n.useBackup=e.sent,i("startAutoSaveTask"),i("refresh"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0),n.useBackup=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},refresh:function(t){return Object(l["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,e.next=3,Vo.getLastBackup();case 3:n.lastBackup=e.sent;case 4:case"end":return e.stop()}}),e)})))()},invoker:function(t){var e=arguments;return Object(l["a"])(regeneratorRuntime.mark((function n(){var i,o,r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.rootState,o=t.rootGetters,r=t.dispatch,a=!(e.length>1&&void 0!==e[1])||e[1],s=o["poster/history/current"],n.next=5,Vo.saveBackupData(Object(u["a"])(Object(u["a"])({},s),{},{canvasSize:i.poster.canvasSize}));case 5:i.poster.backup.lastBackupStepCount=0,r("refresh"),a&&Wo["Message"].success("已备份"),console.log("编辑器数据已备份：".concat(new Date));case 9:case"end":return n.stop()}}),n)})))()}},Qo={namespaced:!0,state:Jo,getters:Zo,actions:Ko};function tr(){var t={activityId:"",pageConfigId:"",pageTitle:"",canvasSize:{width:338,height:600},canvasPosition:{top:null,left:null},background:null,posterItems:[],activeItems:[],assistWidgets:[],layerPanelOpened:!0,referenceLineOpened:!0,copiedWidgets:null,referenceLine:{row:[],col:[]},matchedLine:null,mainPanelScrollY:0,isUnsavedState:!1};return t}var er=tr(),nr={posterItemIds:function(t,e){return t.posterItems.map((function(t){return t.id}))},activeItemIds:function(t){return t.activeItems.map((function(t){return t.id}))},canvasSize:function(t){return t.canvasSize},activityId:function(t){return t.activityId}},ir=(qo={},Object(Zi["a"])(qo,Ki,(function(t,e){t.activityId=e})),Object(Zi["a"])(qo,Qi,(function(t,e){t.pageConfigId=e})),Object(Zi["a"])(qo,eo,(function(t,e){t.pageTitle=e,t.isUnsavedState=!0})),Object(Zi["a"])(qo,"SET_SCROLL_Y",(function(t,e){t.mainPanelScrollY=e})),Object(Zi["a"])(qo,no,(function(t,e){t.canvasPosition=e})),Object(Zi["a"])(qo,io,(function(t,e){e instanceof G["a"]&&(t.background=e)})),Object(Zi["a"])(qo,oo,(function(t){t.background=new G["a"]})),Object(Zi["a"])(qo,ro,(function(t,e){t.background&&e(t.background)})),Object(Zi["a"])(qo,ao,(function(t,e){e instanceof G["g"]&&t.posterItems.push(e)})),Object(Zi["a"])(qo,so,(function(t,e){e.lock||(t.posterItems=t.posterItems.filter((function(t){return t.id!==e.id})))})),Object(Zi["a"])(qo,co,(function(t,e){t.posterItems=e})),Object(Zi["a"])(qo,fo,(function(t,e){!e.lock&&e.visible&&e.couldAddToActive&&t.activeItems.push(e)})),Object(Zi["a"])(qo,po,(function(t,e){t.activeItems=t.activeItems.filter((function(t){return t.id!==e.id}))})),Object(Zi["a"])(qo,mo,(function(t,e){t.activeItems=e.filter((function(t){return!t.lock&&t.couldAddToActive}))})),Object(Zi["a"])(qo,go,(function(t,e){t.assistWidgets.push(e)})),Object(Zi["a"])(qo,vo,(function(t,e){t.assistWidgets=t.assistWidgets.filter((function(t){return t.id!==e.id}))})),Object(Zi["a"])(qo,bo,(function(t,e){t.assistWidgets=e})),Object(Zi["a"])(qo,yo,(function(t,e){t.layerPanelOpened=!!e})),Object(Zi["a"])(qo,wo,(function(t,e){t.referenceLineOpened=!!e})),Object(Zi["a"])(qo,lo,(function(t,e){var n=e.item,i=e.cb,o=t.posterItems.find((function(t){return t.id===n.id}));o&&i&&i(o)})),Object(Zi["a"])(qo,uo,(function(t,e){var n=Array.isArray(e)?e:[e],i=n.filter((function(t){return t&&t.replicable})).map((function(t){return t._copyCount=0,t}));t.copiedWidgets=i.length>0?i:null})),Object(Zi["a"])(qo,ho,(function(t){var e=t.copiedWidgets;e&&e.length>0&&e.forEach((function(e){t.posterItems.push(new G["b"](e))}))})),Object(Zi["a"])(qo,xo,(function(t,e){var n=e.type,i=e.position;t.referenceLine[n].push(i)})),Object(Zi["a"])(qo,ko,(function(t,e){var n=e.type,i=e.index;t.referenceLine[n].splice(i,1)})),Object(Zi["a"])(qo,So,(function(t){t.referenceLine={row:[],col:[]}})),Object(Zi["a"])(qo,Co,(function(t,e){t.matchedLine=e})),Object(Zi["a"])(qo,Oo,(function(t){t.matchedLine=null})),Object(Zi["a"])(qo,to,(function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isUnsavedState=e})),qo),or={resetState:function(t){var e=t.state,n=t.dispatch;return new Promise((function(t){for(var i=0,o=Object.entries(tr());i<o.length;i++){var r=Object(fe["a"])(o[i],2),a=r[0],s=r[1];e[a]=s}n("backup/resetState"),n("history/resetState"),setTimeout((function(){t()}),500)}))},setUnsavedState:function(t,e){var n=t.commit;n(to,e)},setCanvasSize:function(t,e){var n=t.state;t.dispatch;n.canvasSize=e},addBackground:function(t,e){var n=t.state,i=t.commit,o=t.dispatch;n.background&&o("history/push"),i(io,e)},removeBackground:function(t){var e=t.commit,n=t.dispatch;n("history/push"),e(oo)},setBackgroundConfig:function(t,e){t.state;var n=t.commit,i=t.dispatch;i("history/push"),n(ro,e)},seekBackgroundSize:function(t){var e=t.state,n=e.background;n&&n.wState.isSolid&&(n.dragInfo.w=e.canvasSize.width,n.dragInfo.h=e.canvasSize.height)},addItem:function(t,e){var n=t.commit,i=t.dispatch,o=t.state,r=parseInt(e._widgetCountLimit);if(r){var a=o.posterItems.filter((function(t){return t.type===e.type})).length;if(a>=r)return void Wo["Message"].error("<".concat(e.typeLabel||e.type,">类型的组件最多有").concat(r,"个"))}e instanceof G["g"]&&(i("history/push"),e instanceof G["b"]||n(mo,[e]),n(ao,e))},removeItem:function(t,e){var n=t.commit,i=t.getters,o=t.dispatch;e.lock||(i.activeItemIds.includes(e.id)&&n(po,e),o("history/push"),n(so,e))},replacePosterItems:function(t,e){var n=t.commit,i=t.dispatch;i("history/push"),n(co,e),n(mo,[])},addActiveItem:function(t,e){var n=t.commit,i=t.getters;t.dispatch;i.activeItemIds.includes(e.id)||n(fo,e)},removeActiveItem:function(t,e){var n=t.commit;t.dispatch;n(po,e)},replaceActiveItems:function(t,e){var n=t.commit;n(mo,e)},addAssistWidget:function(t,e){var n=t.commit;n(go,e)},removeAssistWidget:function(t,e){var n=t.commit;n(vo,e)},replaceAssistWidgets:function(t,e){var n=t.commit;n(bo,e)},selectAllItems:function(t){var e=t.commit,n=t.state;e(mo,n.posterItems)},setLayerPanel:function(t,e){var n=t.commit;n(yo,e)},updateBackgroundDragInfo:function(t,e){var n=t.state;n.background.dragInfo=Object.assign({},n.background.dragInfo,e)},updateDragInfo:function(t,e){var n=t.state,i=e.dragInfo,o=e.widgetId,r=e.updateSelfOnly,a=void 0!==r&&r,s=n.posterItems.find((function(t){return t.id===o}));if(s){var c=s.dragInfo,l=n.activeItems;if(i=Object.assign({},c,i),a)s.dragInfo=Object.assign({},s.dragInfo,i);else if(l.length>0){var u={w:i.w-c.w,h:i.h-c.h,x:i.x-c.x,y:i.y-c.y,rotateZ:i.rotateZ-c.rotateZ};l.forEach((function(t){var e=t.dragInfo,n=e.x,i=e.y,o=e.w,r=e.h,a=e.rotateZ;t.dragInfo={x:n+u.x,y:i+u.y,w:o+u.w,h:r+u.h,rotateZ:a+u.rotateZ}}))}}},updateWidgetState:function(t,e){var n=t.state,i=t.dispatch,o=e.keyPath,r=e.value,a=e.widgetId,s=e.pushHistory,c=void 0===s||s,l=n.posterItems.find((function(t){return t.id===a}));l&&(c&&i("history/push"),_o()(l.wState,o,r))},changeCompositionPosition:function(t,e){var n=t.state,i=t.dispatch,o=n.activeItems;i("history/push"),To(o,e,n.canvasSize)},setWidgetConfig:function(t,e){var n=t.commit,i=e.item,o=e.cb;n(lo,{item:i,cb:o})},lockItem:function(t,e){var n=t.commit,i=t.getters;i.activeItemIds.includes(e.id)&&n(po,e),n(lo,{item:e,cb:function(t){return t.lock=!0}})},unlockItem:function(t,e){var n=t.commit;n(lo,{item:e,cb:function(t){return t.lock=!1}})},toggleItemVisible:function(t,e){var n=t.commit,i=e.item,o=e.visible;n(lo,{item:i,cb:function(t){return t.visible=!!o}})},widgetMoveToTop:function(t,e){var n=t.commit,i=t.state,o=t.dispatch;o("history/push"),n(co,Object(xi["a"])(i.posterItems,i.posterItems.findIndex((function(t){return t.id===e.id}))))},widgetMoveToUpper:function(t,e){var n=t.commit,i=t.state,o=t.dispatch;o("history/push"),n(co,Object(xi["b"])(i.posterItems,i.posterItems.findIndex((function(t){return t.id===e.id}))))},widgetMoveToLower:function(t,e){var n=t.commit,i=t.state,o=t.dispatch;o("history/push"),n(co,Object(xi["d"])(i.posterItems,i.posterItems.findIndex((function(t){return t.id===e.id}))))},widgetMoveToBottom:function(t,e){var n=t.commit,i=t.state,o=t.dispatch;o("history/push"),n(co,Object(xi["c"])(i.posterItems,i.posterItems.findIndex((function(t){return t.id===e.id}))))},copyWidget:function(t,e){var n=t.commit;n(uo,e)},pasteWidget:function(t){var e=t.commit,n=t.dispatch;n("history/push"),e(ho)},addReferenceLine:function(t,e){var n=t.commit,i=t.dispatch;i("history/push"),n(xo,e)},removeReferenceLine:function(t,e){var n=t.commit,i=t.dispatch;i("history/push"),n(ko,e)},removeAllReferenceLine:function(t){var e=t.commit,n=t.dispatch;n("history/push"),e(So)},setReferenceLineVisible:function(t,e){var n=t.commit;n(wo,e)},setMatchedLine:function(t,e){var n=t.commit;n(Co,e)},removeMatchedLine:function(t){var e=t.commit;e(Oo)},updatePageConfig:function(t,e){var n=t.dispatch,i=(t.state,t.commit),o={};if(e&&jo(e)){i(Qi,e.pageConfigId);var r,a=JSON.parse(e.config),s=e.items;try{var c=s.splice(s.findIndex((function(t){return"background"===t.type})),1)[0];c&&(r=JSON.parse(c.config))}catch(u){console.error(u),r=new G["a"]}var l=tr();o={background:r,posterItems:s.map((function(t){return JSON.parse(t.config)})),referenceLine:a.referenceLine||l.referenceLine,canvasSize:a.canvasSize||l.canvasSize,pageTitle:e.title||""}}else i(Qi,""),o={background:new G["a"],posterItems:[],referenceLine:tr().referenceLine};n("backup/recover",o),i(to,!1)},saveActivityPageConfig:function(t){var e=t.state,n=t.commit,i=(t.rootGetters,{title:e.pageTitle,config:JSON.stringify({referenceLine:e.referenceLine,canvasSize:e.canvasSize}),items:[{type:e.background.type,content:"",config:JSON.stringify(e.background)}].concat(Object(c["a"])(e.posterItems.map((function(t,e){return{type:t.type,content:"",config:JSON.stringify(Object(u["a"])(Object(u["a"])({},t),{},{_sort:e+1}))}}))))});return nn(i).then((function(t){return Wo["Message"].success("保存成功"),n(to,!1),t}),(function(){return Wo["Message"].error("保存失败"),Promise.reject()}))}},rr={namespaced:!0,state:er,getters:nr,mutations:ir,actions:or,modules:{history:No,backup:Qo}},ar=8,sr=67,cr=86,lr=76,ur=72,dr=90,hr=83,fr=65,pr={components:{controlComponent:O,mainComponent:Je,leftSide:Wn,extendSideBar:Ai,layerPanel:Ji},data:function(){return{initLoading:!1}},computed:Object(u["a"])(Object(u["a"])({},Object(d["d"])(["posterItems","layerPanelOpened","activeItems","copiedWidgets","referenceLineOpened","isUnsavedState"])),Object(d["b"])(["activeItemIds"])),beforeRouteLeave:function(t,e,n){if(this.isUnsavedState){var i=window.confirm("当前页面配置未保存,退出将不会保存,是否继续退出？");i?n():n(!1)}else n()},beforeCreate:function(){P["a"].hasModule("poster")||P["a"].registerModule("poster",rr)},created:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initLoading=!0,n=t.$loading({lock:!0,text:"正在初始化编辑器",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.6)"}),e.next=4,t.resetState();case 4:n.close(),t.initLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:document.addEventListener("keydown",t.keydownHandle),t.body=document.body,t.mainPanelRef=t.$refs.main.$refs.mainPanel;case 3:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){document.removeEventListener("keydown",this.keydownHandle),this.killAutoSaveTask()},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(d["a"])(["replacePosterItems","replaceActiveItems","pasteWidget","copyWidget","setLayerPanel","setReferenceLineVisible","resetState"])),Object(d["a"])({undo:"history/undo",redo:"history/redo",backupInit:"backup/init",killAutoSaveTask:"backup/killAutoSaveTask",backupInvoker:"backup/invoker"})),{},{keydownHandle:function(t){var e=this;if(t.target===this.body){var n=t.keyCode,i=t.ctrlKey||t.metaKey,o=t.shiftKey;switch(!0){case n===ar:this.activeItemIds.length>0&&this.replacePosterItems(this.posterItems.filter((function(t){return!e.activeItemIds.includes(t.id)})));break;case n===cr&&i:this.copiedWidgets&&this.pasteWidget();break;case n===sr&&i:if(this.activeItems.length>0){var r=Object(c["a"])(this.activeItems).map((function(t){return t._copyFrom="command",t}));this.copyWidget(r)}break;case n===lr&&i:t.preventDefault(),this.setLayerPanel(!this.layerPanelOpened);break;case n===ur&&i:t.preventDefault(),this.setReferenceLineVisible(!this.referenceLineOpened);break;case n===dr&&i&&o:this.redo();break;case n===dr&&i:this.undo();break;case n===hr&&i:t.preventDefault(),this.backupInvoker();break;case n===fr:t.preventDefault(),this.replaceActiveItems(this.posterItems);break;default:break}}}})},mr=pr,gr=(n("c189"),Object(y["a"])(mr,a,s,!1,null,"3d637676",null)),vr=gr.exports,br={components:{posterEditor:vr}},yr=br,wr=Object(y["a"])(yr,o,r,!1,null,null,null),xr=wr.exports,kr=n("a5e4");i["default"].use(kr["a"]);var Sr=[{path:"/"}],Cr=new kr["a"]({mode:"hash",base:"",routes:Sr}),Or=Cr,Ir=(n("e9b7"),n("b20f"),n("24ab"),n("9673"),{permission:{inserted:function(t,e,n){try{var i=e.value||[],o=P["a"].getters.user_roles;if("string"===typeof i&&(i=[i]),!(i&&i instanceof Array&&i.length>0))throw new Error("need roles!");var r=i,a=o.some((function(t){return r.includes(t)}));a||t.parentNode&&t.parentNode.removeChild(t)}catch(s){console.log(s),t.parentNode&&t.parentNode.removeChild(t)}}}}),jr=Ir,Er=n("caaf"),_r=n.n(Er);_r.a.locale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY年MM月DD日",LLL:"YYYY年MM月DD日Ah点mm分",LLLL:"YYYY年MM月DD日ddddAh点mm分",l:"YYYY-M-D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"下午"===e||"晚上"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}});var Tr=_r.a,Lr="POSTER_EDITOR_";function Rr(t){return Lr+t}function Mr(t,e){e||localStorage.removeItem(Rr(t)),localStorage.setItem(Rr(t),JSON.stringify(e))}function Pr(t){localStorage.removeItem(Rr(t))}function Br(t){return JSON.parse(localStorage.getItem(Rr(t)))}function Ar(t,e){e||sessionStorage.removeItem(Rr(t)),sessionStorage.setItem(Rr(t),JSON.stringify(e))}function Dr(t){sessionStorage.removeItem(Rr(t))}function zr(t){return JSON.parse(sessionStorage.getItem(Rr(t)))}var Nr={setLocal:Mr,removeLocal:Pr,getLocal:Br,setSession:Ar,removeSession:Dr,getSession:zr},Wr=n("cf1e"),Hr=n.n(Wr),$r=function(t){t.prototype.$moment=Tr,t.prototype.$setLocal=Nr.setLocal,t.prototype.$getLocal=Nr.getLocal,t.prototype.$removeLocal=Nr.removeLocal,t.prototype.$setSession=Nr.setSession,t.prototype.$getSession=Nr.getSession,t.prototype.$removeSession=Nr.removeSession,t.prototype.$css=Hr.a,t.prototype.$deepCopy=function(t){return t?JSON.parse(JSON.stringify(t)):{}},t.prototype.$ENV="production"},Yr={install:function(t){$r(t),Object.keys(jr).forEach((function(e){t.directive(e,jr[e])}))}},Xr=n("78da"),Fr=n.n(Xr);i["default"].config.productionTip=!1,i["default"].use(Ho.a),i["default"].use(Yr),i["default"].use(Fr.a),new i["default"]({router:Or,store:P["a"],render:function(t){return t(xr)}}).$mount("#app")},"56e8":function(t,e,n){"use strict";n("0736")},"57dd":function(t,e,n){},"57ef":function(t,e,n){},5958:function(t,e,n){},"5aff":function(t,e,n){},"5ec8":function(t,e,n){},"64e8":function(t,e,n){},"66b07":function(t,e,n){"use strict";n("3cb7")},6720:function(t,e,n){"use strict";n("67f5")},"67f5":function(t,e,n){},"689c":function(t,e,n){"use strict";n("93d3")},"695b":function(t,e,n){},"6f50":function(t,e,n){},"6ff3":function(t,e,n){var i={"./backgroundWidget.vue":"4fd4","./imageWidget.vue":"a8d4","./rectWidget.vue":"85db","./textWidget.vue":"d2b8"};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id="6ff3"},"798b":function(t,e,n){"use strict";n("11c8")},"7d2d":function(t,e,n){"use strict";n("7f8b")},"7e19":function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vdrr poster-editor-drag",class:{draggable:t.draggable,resizable:t.resizable,rotatable:t.rotatable,active:t.enabled,dragging:t.dragging,resizing:t.resizing,rotating:t.rotating,lock:t.lock},style:t.style,on:{mousedown:function(e){return e.stopPropagation(),t.elmDown.apply(null,arguments)},touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.elmDown.apply(null,arguments)},dblclick:t.fillParent}},[t.resizable?t._l(t.handles,(function(e,i){return n("div",{key:e,staticClass:"handle",class:"handle-"+e,style:{display:t.enabled?"block":"none",cursor:t.cursorStyle[i]},on:{mousedown:function(n){return n.stopPropagation(),n.preventDefault(),t.handleDown(e,n)},touchstart:function(n){return n.stopPropagation(),n.preventDefault(),t.handleDown(e,n)}}})})):t._e(),t.rotatable?[n("div",{staticClass:"handle-rot",class:{rotating:t.rotating},style:{display:t.enabled?"block":"none"},on:{mousedown:function(e){return e.stopPropagation(),e.preventDefault(),t.handleDown("rot",e)},touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.handleDown("rot",e)}}},[n("i",{staticClass:"el-icon-refresh"})])]:t._e(),t._t("default")],2)},r=[],a=n("6d83");n("0a53"),n("4c4d"),n("2a1c"),n("e90a"),n("dfdd"),n("0029"),n("aa88"),n("3a76"),n("403c");function s(t){return"function"===typeof t||"[object Function]"===Object.prototype.toString.call(t)}function c(t,e,n){var o=t;if(n=n||document.documentElement,i=i||["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find((function(t){return s(o[t])})),!s(o[i]))return!1;do{if(o[i](e))return!0;if(o===n)return!1;o=o.parentNode}while(o);return!1}var l={replace:!0,name:"VueDraggableResizableRotatable",props:{active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!0},lock:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:function(t){return"string"===typeof t?"auto"===t:t>0}},h:{type:[Number,String],default:200,validator:function(t){return"string"===typeof t?"auto"===t:t>0}},minw:{type:Number,default:50,validator:function(t){return t>=0}},minh:{type:Number,default:50,validator:function(t){return t>=0}},r:{type:Number,default:0,validator:function(t){return"number"===typeof t}},x:{type:Number,default:0,validator:function(t){return"number"===typeof t}},y:{type:Number,default:0,validator:function(t){return"number"===typeof t}},z:{type:[String,Number],default:"auto",validator:function(t){var e="string"===typeof t?"auto"===t:t>=0;return e}},handles:{type:Array,default:function(){return["tl","tm","tr","mr","br","bm","bl","ml"]},validator:function(t){var e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter((function(t){return e.has(t)}))).size===t.length}},cursors:{type:Array,default:function(){return["nwse-resize","ns-resize","nesw-resize","ew-resize","nwse-resize","ns-resize","nesw-resize","ew-resize"]}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:function(t){return-1!==["x","y","both"].indexOf(t)}},grid:{type:Array,default:function(){return[1,1]}},parent:{type:Boolean,default:!1},maximize:{type:Boolean,default:!1},deselectCancel:{type:String,default:null}},data:function(){return{top:this.y,left:this.x,width:this.w,height:this.h,rotate:this.r,resizing:!1,dragging:!1,rotating:!1,enabled:this.active,handle:null,zIndex:this.z}},computed:{style:function(){return{top:this.y+"px",left:this.x+"px",width:this.width+"px",height:this.height+"px",transform:"rotate("+this.rotate+"deg)",zIndex:this.zIndex}},cursorStyle:function(){var t=["nwse-resize","ns-resize","nesw-resize","ew-resize","nwse-resize","ns-resize","nesw-resize","ew-resize"],e=8,n=45,i=0,o=this.rotate;if(o&&(i=Math.floor(o/n),o%n>n/2&&(i+=1)),i>1){var r=e-i;return t.slice(i,i+r).concat(t.slice(0,i))}return t}},watch:{r:function(t){t>=0&&(this.rotate=t%360)},w:function(t){this.width=t},h:function(t){this.height=t},x:function(t){this.left=t},y:function(t){this.top=t},active:function(t){this.enabled=t},z:function(t){(t>=0||"auto"===t)&&(this.zIndex=t)}},created:function(){this.parentX=0,this.parentW=9999,this.parentY=0,this.parentH=9999,this.lastMouseX=0,this.lastMouseY=0,this.elmX=0,this.elmY=0,this.elmW=0,this.elmH=0,this.lastCenterX=0,this.lastCenterY=0,this.lastElmX=0,this.lastElmY=0,this.lastElmW=0,this.lastElmH=0,this.fixedXName="",this.fixedYName="",this.fixedX=0,this.fixedY=0},mounted:function(){document.documentElement.addEventListener("mousemove",this.handleMove,!0),document.documentElement.addEventListener("mousedown",this.deselect,!0),document.documentElement.addEventListener("mouseup",this.handleUp,!0),document.documentElement.addEventListener("touchmove",this.handleMove,!0),document.documentElement.addEventListener("touchend touchcancel",this.deselect,!0),document.documentElement.addEventListener("touchstart",this.handleUp,!0),this.elmX=parseInt(this.$el.style.left),this.elmY=parseInt(this.$el.style.top),this.elmW=this.$el.offsetWidth||this.$el.clientWidth,this.elmH=this.$el.offsetHeight||this.$el.clientHeight},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.handleMove,!0),document.documentElement.removeEventListener("mousedown",this.deselect,!0),document.documentElement.removeEventListener("mouseup",this.handleUp,!0),document.documentElement.addEventListener("touchmove",this.handleMove,!0),document.documentElement.addEventListener("touchend touchcancel",this.deselect,!0),document.documentElement.addEventListener("touchstart",this.handleUp,!0)},methods:{reviewDimensions:function(){if(this.minw>this.w&&(this.width=this.minw),this.minh>this.h&&(this.height=this.minh),this.parent){var t=parseInt(this.$el.parentNode.clientWidth,10),e=parseInt(this.$el.parentNode.clientHeight,10);this.parentW=t,this.parentH=e,this.w>this.parentW&&(this.width=t),this.h>this.parentH&&(this.height=e),this.x+this.w>this.parentW&&(this.width=t-this.x),this.y+this.h>this.parentH&&(this.height=e-this.y)}this.elmW=this.width,this.elmH=this.height,this.$emit("resizing",this.left,this.top,this.width,this.height)},elmDown:function(t){if(!this.lock){var e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.dragHandle&&!c(e,this.dragHandle,this.$el)||this.dragCancel&&c(e,this.dragCancel,this.$el))return;this.elDownHandler(t)}}},elDownHandler:function(t){this.reviewDimensions(),this.enabled||(this.$emit("activated",t),this.enabled=!0,this.$emit("update:active",!0)),this.elmX=this.left,this.elmY=this.top,this.draggable&&(this.lastElmX=this.elmX,this.lastElmY=this.elmY,this.lastElmW=this.elmW,this.lastElmH=this.elmH,this.dragging=!0)},deselect:function(t){var e=this.getMouseCoordinate(t),n=e.x,i=e.y;this.lastMouseX=n,this.lastMouseY=i;var o=t.target||t.srcElement,r=o.classList;this.enabled&&(r.contains("main-panel")||r.contains("poster-editor-main")||r.contains("poster-editor-background"))&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1))},handleResizeDown:function(t,e){var n={x:"l"===t[1]?"right":"left",y:"t"===t[0]?"bottom":"top"},i={top:this.top,right:this.left+this.width,bottom:this.top+this.height,left:this.left},o=this.rotatedPoint(i,this.rotate,n);this.fixedXName=n.x,this.fixedYName=n.y,this.fixedX=o.x,this.fixedY=o.y,this.lastElmX=this.elmX,this.lastElmY=this.elmY,this.lastElmW=this.elmW,this.lastElmH=this.elmH,this.resizing=!0},handleRotateDown:function(t,e){var n=this.$el.getBoundingClientRect(),i=n.top,o=n.left,r=n.width,a=n.height;this.lastCenterX=window.pageXOffset+o+r/2,this.lastCenterY=window.pageYOffset+i+a/2,this.rotating=!0},handleDown:function(t,e){this.handle=t,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),"rot"===t?this.handleRotateDown(t,e):this.handleResizeDown(t,e)},fillParent:function(t){var e=this;if(this.parent&&this.resizable&&this.maximize){var n=!1,i=function t(){n||window.requestAnimationFrame(t),"x"===e.axis?e.width===e.parentW&&e.left===e.parentX&&(n=!0):"y"===e.axis?e.height===e.parentH&&e.top===e.parentY&&(n=!0):"both"===e.axis&&e.width===e.parentW&&e.height===e.parentH&&e.top===e.parentY&&e.left===e.parentX&&(n=!0),"x"!==e.axis&&"both"!==e.axis||(e.width<e.parentW&&(e.width++,e.elmW++),e.left>e.parentX&&(e.left--,e.elmX--)),"y"!==e.axis&&"both"!==e.axis||(e.height<e.parentH&&(e.height++,e.elmH++),e.top>e.parentY&&(e.top--,e.elmY--)),e.$emit("resizing",e.left,e.top,e.width,e.height)};window.requestAnimationFrame(i)}},handleMove:function(t){if(this.enabled){var e=this.getMouseCoordinate(t),n=e.x,i=e.y;if(this.resizing){var o=this.rotate,r=n-this.lastMouseX,s=i-this.lastMouseY,c=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),l=this.getAngle(r,s),u=Math.PI/180*(l-o),d=Math.round(Math.sin(u)*c),h=Math.round(Math.cos(u)*c);this.elmX=this.lastElmX,this.elmY=this.lastElmY,this.elmW=this.lastElmW,this.elmH=this.lastElmH;var f=Object(a["a"])(this.handle,2),p=f[0],m=f[1];if("m"!==m&&(this.elmW+=h*("r"===m?1:-1)),"m"!==p&&(this.elmH+=d*("b"===p?1:-1)),this.elmW<this.minw&&(this.elmW=this.minw),this.elmH<this.minh&&(this.elmH=this.minh),this.fixedTo(),this.parent){var g=!1;this.elmX<this.parentX&&(this.elmW-=Math.round(this.parentX-this.elmX),g=!0),this.elmY<this.parentY&&(this.elmH-=Math.round(this.parentY-this.elmY),g=!0),this.elmX+this.elmW>this.parentW&&(this.elmW=Math.round(this.parentW-this.elmX),g=!0),this.elmY+this.elmH>this.parentH&&(this.elmH=Math.round(this.parentH-this.elmY),g=!0),g&&this.fixedTo()}this.left=Math.round(this.elmX/this.grid[0])*this.grid[0],this.top=Math.round(this.elmY/this.grid[1])*this.grid[1],this.width=Math.round(this.elmW/this.grid[0])*this.grid[0],this.height=Math.round(this.elmH/this.grid[1])*this.grid[1],this.$emit("resizing",this.left,this.top,this.width,this.height)}else if(this.dragging){this.elmX=this.lastElmX,this.elmY=this.lastElmY,this.elmW=this.lastElmW,this.elmH=this.lastElmH;var v=n-this.lastMouseX,b=i-this.lastMouseY,y=v,w=b;this.parent&&(this.elmX+y<this.parentX?v=this.parentX-this.elmX:this.elmX+this.elmW+y>this.parentW&&(v=this.parentW-this.elmX-this.elmW),this.elmY+w<this.parentY?this.mouseOffY=w-(b=this.parentY-this.elmY):this.elmY+this.elmH+w>this.parentH&&(this.mouseOffY=w-(b=this.parentH-this.elmY-this.elmH))),this.elmX+=v,this.elmY+=b,"x"!==this.axis&&"both"!==this.axis||(this.left=Math.round(this.elmX/this.grid[0])*this.grid[0]),"y"!==this.axis&&"both"!==this.axis||(this.top=Math.round(this.elmY/this.grid[1])*this.grid[1]),this.$emit("dragging",this.left,this.top,t)}else if(this.rotating){var x=i-this.lastCenterY,k=n-this.lastCenterX;this.rotate=(this.getAngle(k,x)-90)%360,this.$emit("rotating",this.rotate)}}},handleUp:function(t){var e=this.getMouseCoordinate(t),n=e.x,i=e.y;this.lastMouseX=n,this.lastMouseY=i,this.handle=null,this.resizing?(this.resizing=!1,this.$emit("resizestop",this.left,this.top,this.width,this.height)):this.dragging?(this.dragging=!1,this.$emit("dragstop",t)):this.rotating&&(this.rotating=!1,this.$emit("rotatestop",this.rotate)),this.elmX=this.left,this.elmY=this.top},getMouseCoordinate:function(t){return-1!==t.type.indexOf("touch")?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.pageX||t.clientX+document.documentElement.scrollLeft,y:t.pageY||t.clientY+document.documentElement.scrollTop}},fixedTo:function(){var t={top:this.elmY,right:this.elmX+this.elmW,bottom:this.elmY+this.elmH,left:this.elmX},e={x:this.fixedXName,y:this.fixedYName},n=this.rotatedPoint(t,this.rotate,e),i=n.x,o=n.y,r=Math.round(this.fixedX-i),a=Math.round(this.fixedY-o);this.elmX+=r,this.elmY+=a},rotatedPoint:function(t,e,n){var i=t.top,o=t.right,r=t.bottom,a=t.left,s=Math.PI/180*e,c=Math.cos(s),l=Math.sin(s),u=(o-a+1)/2+a,d=(r-i+1)/2+i,h=t[n.x],f=t[n.y];return h-=u,f-=d,{x:h*c-f*l+u,y:h*l+f*c+d}},getAngle:function(t,e){var n=Math.atan2(e,t);return n=Math.round(180/Math.PI*n),n<0&&(n=360+n),n}}},u=l,d=(n("7d2d"),n("cba8")),h=Object(d["a"])(u,o,r,!1,null,"142d3bea",null);e["a"]=h.exports},"7f8b":function(t,e,n){},"7fc3":function(t,e,n){},8387:function(t,e,n){},"85db":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rect-widget",style:t.rectStyleFilter},[t.isActive?n("portal",{attrs:{to:t.$data.$controlTarget}},[n("rect-control",{key:t.item.id,attrs:{item:t.item}})],1):t._e()],1)},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rect-control"},[n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"borderAndBackground"},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"header"},[t._v("边框和背景")])]},proxy:!0}])},[n("setting-content",[n("setting-item",{attrs:{label:"背景颜色"}},[n("el-color-picker",{attrs:{size:"small"},model:{value:t.inBackgroundColor,callback:function(e){t.inBackgroundColor=e},expression:"inBackgroundColor"}})],1),n("setting-item",{attrs:{label:"边框颜色、宽度"}},[n("el-color-picker",{attrs:{size:"small"},model:{value:t.inBorderColor,callback:function(e){t.inBorderColor=e},expression:"inBorderColor"}}),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inBorderWidth,expression:"inBorderWidth",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.inBorderWidth},on:{input:function(e){e.target.composing||(t.inBorderWidth=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})],1),n("setting-item",{attrs:{label:"边框样式"}},[n("radio-group",{attrs:{list:t.borderStyleList},model:{value:t.inBorderStyle,callback:function(e){t.inBorderStyle=e},expression:"inBorderStyle"}})],1),n("setting-item",{attrs:{label:"左上角弧度"}},[n("el-slider",{staticStyle:{width:"100%"},on:{input:function(e){return t.borderRadiusInput("tl")},change:t.borderRadiusChange},model:{value:t.inBorderTopLeftRadius,callback:function(e){t.inBorderTopLeftRadius=e},expression:"inBorderTopLeftRadius"}})],1),n("setting-item",{attrs:{label:"右上角弧度"}},[n("el-slider",{staticStyle:{width:"100%"},on:{input:function(e){return t.borderRadiusInput("tr")},change:t.borderRadiusChange},model:{value:t.inBorderTopRightRadius,callback:function(e){t.inBorderTopRightRadius=e},expression:"inBorderTopRightRadius"}})],1),n("setting-item",{attrs:{label:"左下角弧度"}},[n("el-slider",{staticStyle:{width:"100%"},on:{input:function(e){return t.borderRadiusInput("bl")},change:t.borderRadiusChange},model:{value:t.inBorderBottomLeftRadius,callback:function(e){t.inBorderBottomLeftRadius=e},expression:"inBorderBottomLeftRadius"}})],1),n("setting-item",{attrs:{label:"右下角弧度"}},[n("el-slider",{staticStyle:{width:"100%"},on:{input:function(e){return t.borderRadiusInput("br")},change:t.borderRadiusChange},model:{value:t.inBorderBottomRightRadius,callback:function(e){t.inBorderBottomRightRadius=e},expression:"inBorderBottomRightRadius"}})],1)],1)],1),n("el-collapse-item",{attrs:{name:"position"},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"header"},[t._v(" 位置 ")])]},proxy:!0}])},[n("position-control",{attrs:{"drag-info":t.dragInfo}})],1)],1)],1)},a=[],s=n("adde"),c={mixins:[s["a"]],data:function(){return{activeNames:["position","borderAndBackground"],borderStyleList:[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"双线",value:"double "},{label:"点线",value:"dotted "}],borderRadiusInit:{}}},computed:{inBorderColor:{get:function(){return this.style.borderColor},set:function(t){this.updateStyle("borderColor",t)}},inBorderWidth:{get:function(){return parseInt(this.style.borderWidth)},set:function(t){this.updateStyle("borderWidth",t+"px")}},inBorderStyle:{get:function(){return this.style.borderStyle},set:function(t){this.updateStyle("borderStyle",t)}},inBackgroundColor:{get:function(){return this.style.backgroundColor},set:function(t){this.updateStyle("backgroundColor",t)}},inBorderTopLeftRadius:{get:function(){return parseInt(this.style.borderTopLeftRadius)},set:function(t){this.updateStyle("borderTopLeftRadius",t+"%",!1)}},inBorderTopRightRadius:{get:function(){return parseInt(this.style.borderTopRightRadius)},set:function(t){this.updateStyle("borderTopRightRadius",t+"%",!1)}},inBorderBottomLeftRadius:{get:function(){return parseInt(this.style.borderBottomLeftRadius)},set:function(t){this.updateStyle("borderBottomLeftRadius",t+"%",!1)}},inBorderBottomRightRadius:{get:function(){return parseInt(this.style.borderBottomRightRadius)},set:function(t){this.updateStyle("borderBottomRightRadius",t+"%",!1)}}},methods:{borderRadiusInput:function(t){this.borderRadiusInit[t]?this.borderRadiusDragging||(this.borderRadiusDragging=!0,this.pushHistory()):this.borderRadiusInit[t]=!0},borderRadiusChange:function(){this.borderRadiusDragging=!1}}},l=c,u=(n("d1c1"),n("cba8")),d=Object(u["a"])(l,r,a,!1,null,"688c13e3",null),h=d.exports,f=n("a928"),p={components:{rectControl:h},mixins:[f["e"].widgetMixin()],data:function(){return{}},computed:{rectStyleFilter:function(){return this.wState.style}},methods:{}},m=p,g=(n("56e8"),Object(u["a"])(m,i,o,!1,null,"7a0afd5a",null));e["default"]=g.exports},"892a":function(t,e,n){"use strict";n("44a9")},8967:function(t,e,n){"use strict";n("a6d2")},"8b99":function(t,e,n){},"8d9f":function(t,e,n){},"8e5c":function(t,e,n){"use strict";n("09d8")},9374:function(t,e,n){"use strict";n("547f")},"93d3":function(t,e,n){},"957b":function(t,e,n){"use strict";n("cf4c")},"95c4":function(t,e,n){"use strict";n("529b")},"95d8":function(t,e,n){},9701:function(t,e,n){},"9a2a":function(t,e,n){"use strict";n("9e8c")},"9a59":function(t,e,n){"use strict";n("5aff")},"9e8c":function(t,e,n){},"9ec8":function(t,e,n){"use strict";n("95d8")},"9f88":function(t,e,n){},a3de:function(t,e,n){"use strict";n("5958")},a6d2:function(t,e,n){},a79d:function(t,e,n){"use strict";n("0ae8")},a8d4:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-widget",staticStyle:{width:"100%",height:"100%"}},[n("img",{ref:"image",staticClass:"qr-code",staticStyle:{width:"100%",height:"100%"},attrs:{src:t.wState.src,ondragstart:"return false"},on:{load:t.load}}),t.isActive?n("portal",{attrs:{to:t.$data.$controlTarget}},[n("image-control",{key:t.item.id,attrs:{item:t.item}})],1):t._e()],1)},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-control"},[n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"position"},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"header"},[t._v(" 位置 ")])]},proxy:!0}])},[n("position-control",{attrs:{"drag-info":t.dragInfo}})],1)],1)],1)},a=[],s=n("adde"),c={mixins:[s["a"]],data:function(){return{activeNames:["image","position"]}}},l=c,u=(n("4ade"),n("cba8")),d=Object(u["a"])(l,r,a,!1,null,"76da178b",null),h=d.exports,f=n("a928"),p={components:{imageControl:h},mixins:[f["d"].widgetMixin()],data:function(){return{}},methods:{load:function(){if(!this.item.isCopied){var t=this.$refs.image,e=t.naturalWidth,n=t.naturalHeight;this.updateDragInfo({w:100,h:parseInt(100*n/e)})}}}},m=p,g=(n("66b07"),Object(u["a"])(m,i,o,!1,null,"748f5dce",null));e["default"]=g.exports},a8fb:function(t,e,n){"use strict";n("d8b7")},a928:function(t,e,n){"use strict";n.d(e,"g",(function(){return i["a"]})),n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return m})),n.d(e,"f",(function(){return v})),n.d(e,"c",(function(){return b})),n.d(e,"e",(function(){return w})),n.d(e,"b",(function(){return x}));var i=n("186d"),o=n("97ee"),r=n("db8d"),a=n("ea19"),s=n("06c4"),c=n("2317"),l=n.n(c),u=n("c9a6");function d(t){return Object(u["g"])({tag:"image",attrs:{src:t.wState.src},style:Object(s["a"])({},i["a"].getPositionStyle(t.dragInfo))})}var h=function(t){Object(r["a"])(n,t);var e=Object(a["a"])(n);function n(t){var i;return Object(o["a"])(this,n),t=l()({type:"image",typeLabel:"图片",componentName:"image-widget",icon:"el-icon-picture",lock:!1,visible:!0,wState:{src:""}},t),i=e.call(this,t),i._codeGen=d,i}return n}(i["a"]),f=n("8955");function p(t){var e={style:Object(s["a"])(Object(s["a"])({},t.wState.style),i["a"].getPositionStyle(t.dragInfo))};return t.wState.isSolid?(e.tag="div",e.style.backgroundColor=t.wState.style.backgroundColor):(e.tag="image",e.attrs={src:t.wState.src}),Object(u["g"])(e)}var m=function(t){Object(r["a"])(n,t);var e=Object(a["a"])(n);function n(t){var i;return Object(o["a"])(this,n),t=l()({type:"background",typeLabel:"背景",componentName:"background-widget",icon:"icon-background",lock:!0,visible:!0,couldAddToActive:!1,replicable:!1,wState:{isSolid:!0,src:"",style:{backgroundColor:"#fff"}}},t),i=e.call(this,t),i._codeGen=p,i}return n}(i["a"]);function g(t){return Object(u["g"])({tag:"div",style:Object(s["a"])({},i["a"].getPositionStyle(t.dragInfo)),children:[{tag:"div",text:t.wState.text,style:Object(s["a"])({},t.wState.style)}]})}Object(f["a"])(m,"widgetMixin",(function(){var t=i["a"].widgetMixin({baseMenuList:[]}),e=t.created,n=t.mounted,o=t.methods,r=t.computed;return{created:e,mounted:n,methods:o,computed:r}}));var v=function(t){Object(r["a"])(n,t);var e=Object(a["a"])(n);function n(t){var i;return Object(o["a"])(this,n),t=l()({type:"text",typeLabel:"文本",componentName:"text-widget",icon:"icon-text",lock:!1,visible:!0,wState:{text:"双击编辑文本",style:{margin:"10px",wordBreak:"break-all",color:"#000",textAlign:"center",fontSize:"14px",padding:0,borderColor:"#000",borderWidth:0,borderStyle:"solid",lineHeight:"100%",letterSpacing:0,backgroundColor:"",fontWeight:"",fontStyle:"",textDecoration:""}}},t),i=e.call(this,t),i._codeGen=g,i}return n}(i["a"]),b=function(t){Object(r["a"])(n,t);var e=Object(a["a"])(n);function n(t){var i;return Object(o["a"])(this,n),t=l()({type:"rect",typeLabel:"矩形",componentName:"draw-rect-widget",icon:"icon-rect",lock:!1,visible:!0,layerPanelVisible:!1,replicable:!1,couldAddToActive:!1},t),i=e.call(this,t),i.drawing=!0,i}return n}(i["a"]);function y(t){var e=t.wState.style;return console.log(t.dragInfo),console.log(i["a"].getPositionStyle(t.dragInfo)),Object(u["g"])({tag:"div",style:Object(s["a"])(Object(s["a"])({},Object.assign({},e,{borderWidth:e.borderWidth+"px",borderTopLeftRadius:e.borderTopLeftRadius+"%",borderTopRightRadius:e.borderTopRightRadius+"%",borderBottomLeftRadius:e.borderBottomLeftRadius+"%",borderBottomRightRadius:e.borderBottomRightRadius+"%"})),i["a"].getPositionStyle(t.dragInfo))})}var w=function(t){Object(r["a"])(n,t);var e=Object(a["a"])(n);function n(t){var i;return Object(o["a"])(this,n),t=l()({type:"rect",typeLabel:"矩形",componentName:"rect-widget",icon:"icon-rect",lock:!1,visible:!0,wState:{style:{borderColor:"#000",borderWidth:0,borderStyle:"solid",backgroundColor:"#2d51cc",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0}}},t),i=e.call(this,t),i._codeGen=y,i}return n}(i["a"]),x=function(t){Object(r["a"])(n,t);var e=Object(a["a"])(n);function n(t){var i;Object(o["a"])(this,n),t._copyCount+=1;var r=Object.assign({},JSON.parse(JSON.stringify(t)),{typeLabel:t.typeLabel+"-copy",isCopied:!0,componentState:function(){return null},initHook:t.initHook});return i=e.call(this,r),i._codeGen=t._codeGen,i}return n}(i["a"])},aaf1:function(t,e,n){var i={"./af":"0674","./af.js":"0674","./ar":"6cc2","./ar-dz":"b1de","./ar-dz.js":"b1de","./ar-kw":"7d0b","./ar-kw.js":"7d0b","./ar-ly":"4064","./ar-ly.js":"4064","./ar-ma":"56ad","./ar-ma.js":"56ad","./ar-sa":"adaa","./ar-sa.js":"adaa","./ar-tn":"5221","./ar-tn.js":"5221","./ar.js":"6cc2","./az":"1a3f","./az.js":"1a3f","./be":"84b2","./be.js":"84b2","./bg":"a213","./bg.js":"a213","./bm":"8b34","./bm.js":"8b34","./bn":"3482","./bn-bd":"98bb","./bn-bd.js":"98bb","./bn.js":"3482","./bo":"a3f6","./bo.js":"a3f6","./br":"72ea","./br.js":"72ea","./bs":"fa2c","./bs.js":"fa2c","./ca":"f217","./ca.js":"f217","./cs":"1b54","./cs.js":"1b54","./cv":"ae9c","./cv.js":"ae9c","./cy":"7554","./cy.js":"7554","./da":"b478","./da.js":"b478","./de":"35a9","./de-at":"5b88","./de-at.js":"5b88","./de-ch":"7475","./de-ch.js":"7475","./de.js":"35a9","./dv":"4c16","./dv.js":"4c16","./el":"3f33","./el.js":"3f33","./en-au":"73ff","./en-au.js":"73ff","./en-ca":"bfc9","./en-ca.js":"bfc9","./en-gb":"428a","./en-gb.js":"428a","./en-ie":"6b5c","./en-ie.js":"6b5c","./en-il":"eb4a","./en-il.js":"eb4a","./en-in":"3fbf","./en-in.js":"3fbf","./en-nz":"89f8","./en-nz.js":"89f8","./en-sg":"13d6","./en-sg.js":"13d6","./eo":"dfd6","./eo.js":"dfd6","./es":"5221e","./es-do":"7a70","./es-do.js":"7a70","./es-mx":"a656","./es-mx.js":"a656","./es-us":"3081","./es-us.js":"3081","./es.js":"5221e","./et":"45f3","./et.js":"45f3","./eu":"d1a1","./eu.js":"d1a1","./fa":"6773","./fa.js":"6773","./fi":"259f","./fi.js":"259f","./fil":"32e2","./fil.js":"32e2","./fo":"0e60","./fo.js":"0e60","./fr":"0600","./fr-ca":"6520","./fr-ca.js":"6520","./fr-ch":"2b9c","./fr-ch.js":"2b9c","./fr.js":"0600","./fy":"23bb","./fy.js":"23bb","./ga":"f9bb","./ga.js":"f9bb","./gd":"088a","./gd.js":"088a","./gl":"da3a","./gl.js":"da3a","./gom-deva":"e728","./gom-deva.js":"e728","./gom-latn":"b781","./gom-latn.js":"b781","./gu":"ab1a","./gu.js":"ab1a","./he":"2e9a","./he.js":"2e9a","./hi":"77d9","./hi.js":"77d9","./hr":"334c","./hr.js":"334c","./hu":"9f96","./hu.js":"9f96","./hy-am":"f2d9","./hy-am.js":"f2d9","./id":"7e6f","./id.js":"7e6f","./is":"770b","./is.js":"770b","./it":"aed5","./it-ch":"72a8","./it-ch.js":"72a8","./it.js":"aed5","./ja":"d546","./ja.js":"d546","./jv":"63b1","./jv.js":"63b1","./ka":"517d","./ka.js":"517d","./kk":"1320","./kk.js":"1320","./km":"b9f3","./km.js":"b9f3","./kn":"d861","./kn.js":"d861","./ko":"ce13","./ko.js":"ce13","./ku":"ecb8","./ku.js":"ecb8","./ky":"885a","./ky.js":"885a","./lb":"aa9d","./lb.js":"aa9d","./lo":"579e","./lo.js":"579e","./lt":"b8d7","./lt.js":"b8d7","./lv":"1bb4","./lv.js":"1bb4","./me":"673d","./me.js":"673d","./mi":"26ae","./mi.js":"26ae","./mk":"e174","./mk.js":"e174","./ml":"4a84","./ml.js":"4a84","./mn":"aadd","./mn.js":"aadd","./mr":"a2a5","./mr.js":"a2a5","./ms":"d18a","./ms-my":"66b0","./ms-my.js":"66b0","./ms.js":"d18a","./mt":"7fb0","./mt.js":"7fb0","./my":"74d1","./my.js":"74d1","./nb":"5fd8","./nb.js":"5fd8","./ne":"4e84","./ne.js":"4e84","./nl":"6f41","./nl-be":"6f69","./nl-be.js":"6f69","./nl.js":"6f41","./nn":"e69e","./nn.js":"e69e","./oc-lnc":"8d28","./oc-lnc.js":"8d28","./pa-in":"b000","./pa-in.js":"b000","./pl":"510c","./pl.js":"510c","./pt":"714b","./pt-br":"e9f3","./pt-br.js":"e9f3","./pt.js":"714b","./ro":"a876","./ro.js":"a876","./ru":"ba7c","./ru.js":"ba7c","./sd":"25dc","./sd.js":"25dc","./se":"d540","./se.js":"d540","./si":"1b0a","./si.js":"1b0a","./sk":"bfa3","./sk.js":"bfa3","./sl":"d112","./sl.js":"d112","./sq":"8f41","./sq.js":"8f41","./sr":"61ee","./sr-cyrl":"17eb","./sr-cyrl.js":"17eb","./sr.js":"61ee","./ss":"0d66","./ss.js":"0d66","./sv":"820c","./sv.js":"820c","./sw":"dbbf","./sw.js":"dbbf","./ta":"70b6","./ta.js":"70b6","./te":"67e8","./te.js":"67e8","./tet":"9609","./tet.js":"9609","./tg":"a19a","./tg.js":"a19a","./th":"459d","./th.js":"459d","./tk":"b2a1","./tk.js":"b2a1","./tl-ph":"341b","./tl-ph.js":"341b","./tlh":"b24c","./tlh.js":"b24c","./tr":"8f6c","./tr.js":"8f6c","./tzl":"fea0","./tzl.js":"fea0","./tzm":"9828","./tzm-latn":"a859","./tzm-latn.js":"a859","./tzm.js":"9828","./ug-cn":"0a67","./ug-cn.js":"0a67","./uk":"82cc","./uk.js":"82cc","./ur":"ad72","./ur.js":"ad72","./uz":"015a","./uz-latn":"35be","./uz-latn.js":"35be","./uz.js":"015a","./vi":"90db","./vi.js":"90db","./x-pseudo":"7eee","./x-pseudo.js":"7eee","./yo":"b9ec","./yo.js":"b9ec","./zh-cn":"10ef","./zh-cn.js":"10ef","./zh-hk":"c3a6","./zh-hk.js":"c3a6","./zh-mo":"9218","./zh-mo.js":"9218","./zh-tw":"0144","./zh-tw.js":"0144"};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id="aaf1"},ad94:function(t,e,n){"use strict";n("5ec8")},adde:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("06c4"),o=n("5360"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("setting-content",[n("setting-item",{attrs:{label:"宽度"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.dragInfo.w,expression:"dragInfo.w",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.dragInfo.w},on:{input:function(e){e.target.composing||t.$set(t.dragInfo,"w",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),n("setting-item",{attrs:{label:"高度"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.dragInfo.h,expression:"dragInfo.h",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.dragInfo.h},on:{input:function(e){e.target.composing||t.$set(t.dragInfo,"h",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),n("setting-item",{attrs:{label:"距顶部距离"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.dragInfo.y,expression:"dragInfo.y",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.dragInfo.y},on:{input:function(e){e.target.composing||t.$set(t.dragInfo,"y",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),n("setting-item",{attrs:{label:"距左侧距离"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.dragInfo.x,expression:"dragInfo.x",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.dragInfo.x},on:{input:function(e){e.target.composing||t.$set(t.dragInfo,"x",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),n("setting-item",{attrs:{label:"旋转角度"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.dragInfo.rotateZ,expression:"dragInfo.rotateZ",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.dragInfo.rotateZ},on:{input:function(e){e.target.composing||t.$set(t.dragInfo,"rotateZ",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])],1)},a=[],s={components:{settingContent:o["b"],settingItem:o["c"]},props:{dragInfo:{type:Object,default:function(){return{}},require:!0}},data:function(){return{}},methods:{}},c=s,l=n("cba8"),u=Object(l["a"])(c,r,a,!1,null,"0bb5080c",null),d=u.exports,h=n("4549"),f={components:{settingContent:o["b"],settingItem:o["c"],settingRow:o["d"],radioGroup:o["a"],positionControl:d},props:{item:{type:Object,default:function(){return{}}}},computed:{dragInfo:function(){return this.item.dragInfo},wState:function(){return this.item.wState},style:function(){return this.wState.style}},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(h["a"])(["updateWidgetState"])),Object(h["a"])({pushHistory:"history/push"})),{},{updateStyle:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.updateWidgetState({keyPath:"style."+t,value:e,widgetId:this.item.id,pushHistory:n})}})}},aef2:function(t,e,n){},b17a:function(t,e,n){"use strict";n("6f50")},b20f:function(t,e,n){t.exports={colorTheme:"#019aff",colorThemeD:"#2946a8",colorThemeDD:"#263445",colorThemeL:"#e2e6f3",colorSideBarBg:"#353744",colorBg1:"#f5f8fd",colorBg2:"#f4f4f4",colorSuccess:"#67c23a",colorWarn:"#e6a23c",colorDanger:"#f56c6c",colorError:"#f56c6c",colorMoney:"#f60",colorText:"#606266",colorTextD:"#303133",colorTextL:"#909399",colorBorder:"#dcdfe6"}},b2c7:function(t,e,n){"use strict";n("b970")},b8e3:function(t,e,n){"use strict";n("bbdd")},b970:function(t,e,n){},ba5e:function(t,e,n){"use strict";n("aef2")},bbdd:function(t,e,n){},c189:function(t,e,n){"use strict";n("7fc3")},c21b:function(t,e,n){},c36a:function(t,e,n){},c7bf:function(t,e,n){"use strict";n("9f88")},c84b:function(t,e,n){"use strict";n("d686")},c9a6:function(t,e,n){"use strict";n.d(e,"i",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"e",(function(){return m}));n("06c4");var i=n("0344"),o=(n("b0f7"),n("6d83"),n("4c4d"),n("6135"),n("c7ae"),n("9673"),n("83a0"),n("31c9"),n("aa88"),n("d9dd"),n("f6a2"),n("3a76"),n("9135"),n("65ff"),n("2f90"),n("f526"),n("0119"),n("59c0"),n("fce1"),n("8909"),n("c473"),n("175e"),n("9aa3"),n("a260"),n("8ee0"),n("d3c1"),n("bcad"),n("4f9b"),n("f5b9"),n("60f4"),n("b629"),n("11dc"),n("1202"),n("9d2a"),n("07df"),n("402b"),n("565e"),n("fd48"),n("4732"),n("055a")),r=n.n(o);function a(){return Math.random().toString(32).substr(2)}var s={button:{height:"36px",boxSizing:"border-box",padding:"0 8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",border:"none"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",paddingTop:"1px"},_defaultStyle:{boxSizing:"border-box"}};function c(t){var e=null;try{var n=t.style,i=void 0===n?{}:n,o=t.tag,r=void 0===o?"div":o,a=t.styleFragment,l=t.attrs,u=void 0===l?{}:l,d=t.children,h=t.text;if(e=document.createElement(r),a&&a.length>0){var f={};a.forEach((function(t){Object.assign(f,s[t]||null)})),i=Object.assign({},f,i)}Object.keys(i).forEach((function(t){e.style[t]=i[t]})),Object.keys(s._defaultStyle).forEach((function(t){e.style[t]=s._defaultStyle[t]})),Object.keys(u).forEach((function(t){e.setAttribute(t,u[t])})),h&&(e.innerText=h),d&&d.length>0&&d.forEach((function(t){e.appendChild(c(t))}))}catch(p){console.error(p)}return e}function l(t){var e=document.createElement("div");return e.appendChild(c(t)),e.innerHTML}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){var o={width:0,height:0};e=Object.assign({},o,e);var a=e,s=a.width,c=a.height;try{document.body.appendChild(t),r()(t,{width:s,height:c,scale:2}).then((function(e){var i=e.toDataURL();console.log(i);var o=document.createElement("img");o.width=s,o.height=c,o.src=i,document.body.removeChild(t),n(o)})).catch((function(e){console.log(e),document.body.removeChild(t),i()}))}catch(l){console.log(l),i()}}))}function d(t,e){if(0!==e){var n=Object(i["a"])(t),o=n.splice(e,1);return n.unshift.apply(n,Object(i["a"])(o)),n}return t}function h(t,e){if(0!==e){var n=Object(i["a"])(t),o=e,r=e-1,a=[n[r],n[o]];return n[o]=a[0],n[r]=a[1],n}return t}function f(t,e){if(e!==t.length-1){var n=Object(i["a"])(t),o=e,r=e+1,a=[n[r],n[o]];return n[o]=a[0],n[r]=a[1],n}return t}function p(t,e){var n=t.length-1;if(e!==n){var o=Object(i["a"])(t),r=o.splice(e,1);return o.push.apply(o,Object(i["a"])(r)),o}return t}function m(t){var e=t.split(","),n=e[0].match(/:(.*?);/)[1],i=atob(e[1]),o=i.length,r=new Uint8Array(o);while(o--)r[o]=i.charCodeAt(o);return new Blob([r],{type:n})}},cde1:function(t,e,n){},cf1e:function(t,e,n){t.exports={colorTheme:"#019aff",colorThemeD:"#2946a8",colorThemeDD:"#263445",colorThemeL:"#e2e6f3",colorSideBarBg:"#353744",colorBg1:"#f5f8fd",colorBg2:"#f4f4f4",colorSuccess:"#67c23a",colorWarn:"#e6a23c",colorDanger:"#f56c6c",colorError:"#f56c6c",colorMoney:"#f60",colorText:"#606266",colorTextD:"#303133",colorTextL:"#909399",colorBorder:"#dcdfe6"}},cf4c:function(t,e,n){},d18a5:function(t,e,n){},d1c1:function(t,e,n){"use strict";n("64e8")},d2b8:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-widget"},[t.isEditing?n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.saveText,expression:"saveText"}],key:"2",ref:"textContainer",staticClass:"text-container editing",style:t.textStyle,attrs:{contenteditable:"true"},domProps:{innerHTML:t._s(t.text)}},[t._v(" "+t._s(t.text)+" ")]):n("div",{key:"1",staticClass:"text-container",style:t.textStyle,attrs:{contenteditable:"false"},domProps:{innerHTML:t._s(t.text)}},[t._v(" "+t._s(t.text)+" ")]),t.isActive?n("portal",{attrs:{to:t.$data.$controlTarget}},[n("text-control",{key:t.item.id,attrs:{item:t.item}})],1):t._e()],1)},o=[],r=n("06c4"),a=n("a928"),s=n("1613"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-control"},[n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"text"},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"header"},[t._v(" 文字 ")])]},proxy:!0}])},[n("setting-content",[n("setting-row",{scopedSlots:t._u([{key:"left",fn:function(){return[n("setting-item",{attrs:{label:"颜色"}},[n("el-color-picker",{attrs:{size:"small"},model:{value:t.inColor,callback:function(e){t.inColor=e},expression:"inColor"}})],1)]},proxy:!0},{key:"right",fn:function(){return[n("setting-item",{attrs:{label:"字号"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inFontSize,expression:"inFontSize",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.inFontSize},on:{input:function(e){e.target.composing||(t.inFontSize=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]},proxy:!0}])}),n("setting-item",{attrs:{label:"对齐方式"}},[n("radio-group",{attrs:{list:t.textAlignList},scopedSlots:t._u([{key:"left",fn:function(){return[n("i",{staticClass:"icon-align-left"})]},proxy:!0},{key:"center",fn:function(){return[n("i",{staticClass:"icon-align-center"})]},proxy:!0},{key:"right",fn:function(){return[n("i",{staticClass:"icon-align-right"})]},proxy:!0}]),model:{value:t.inTextAlign,callback:function(e){t.inTextAlign=e},expression:"inTextAlign"}})],1),n("setting-row",{scopedSlots:t._u([{key:"left",fn:function(){return[n("setting-item",{attrs:{label:"行间距"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inLineHeight,expression:"inLineHeight",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.inLineHeight},on:{input:function(e){e.target.composing||(t.inLineHeight=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]},proxy:!0},{key:"right",fn:function(){return[n("setting-item",{attrs:{label:"字间距"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inLetterSpacing,expression:"inLetterSpacing",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.inLetterSpacing},on:{input:function(e){e.target.composing||(t.inLetterSpacing=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]},proxy:!0}])}),n("setting-item",{attrs:{label:"格式"}},[n("radio-group",{attrs:{list:t.textFotmatList},model:{value:t.inTextFormat,callback:function(e){t.inTextFormat=e},expression:"inTextFormat"}})],1)],1)],1),n("el-collapse-item",{attrs:{name:"borderAndBackground"},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"header"},[t._v("边框和背景")])]},proxy:!0}])},[n("setting-content",[n("setting-item",{attrs:{label:"背景颜色"}},[n("el-color-picker",{attrs:{size:"small"},model:{value:t.inBackgroundColor,callback:function(e){t.inBackgroundColor=e},expression:"inBackgroundColor"}})],1),n("setting-item",{attrs:{label:"内边距"}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inPadding,expression:"inPadding",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.inPadding},on:{input:function(e){e.target.composing||(t.inPadding=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),n("setting-item",{attrs:{label:"边框颜色、宽度"}},[n("el-color-picker",{attrs:{size:"small"},model:{value:t.inBorderColor,callback:function(e){t.inBorderColor=e},expression:"inBorderColor"}}),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inBorderWidth,expression:"inBorderWidth",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.inBorderWidth},on:{input:function(e){e.target.composing||(t.inBorderWidth=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})],1),n("setting-item",{attrs:{label:"边框样式"}},[n("radio-group",{attrs:{list:t.borderStyleList},model:{value:t.inBorderStyle,callback:function(e){t.inBorderStyle=e},expression:"inBorderStyle"}})],1)],1)],1),n("el-collapse-item",{attrs:{name:"position"},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"header"},[t._v(" 位置 ")])]},proxy:!0}])},[n("position-control",{attrs:{"drag-info":t.dragInfo}})],1)],1)],1)},l=[],u=n("adde"),d={mixins:[u["a"]],data:function(){return{activeNames:["text","position","borderAndBackground"],textAlignList:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],textFotmatList:[{label:"粗体",value:"bold"},{label:"斜体",value:"italic"},{label:"划线",value:"line-through"}],borderStyleList:[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"双线",value:"double "},{label:"点线",value:"dotted "}]}},computed:{inColor:{get:function(){return this.style.color},set:function(t){this.updateStyle("color",t)}},inFontSize:{get:function(){return parseInt(this.style.fontSize)},set:function(t){this.updateStyle("fontSize",t+"px")}},inPadding:{get:function(){return parseInt(this.style.padding)},set:function(t){this.updateStyle("padding",t+"px")}},inBorderColor:{get:function(){return this.style.borderColor},set:function(t){this.updateStyle("borderColor",t)}},inBorderWidth:{get:function(){return parseInt(this.style.borderWidth)},set:function(t){this.updateStyle("borderWidth",t+"px")}},inBorderStyle:{get:function(){return this.style.borderStyle},set:function(t){this.updateStyle("borderStyle",t)}},inLineHeight:{get:function(){return parseInt(this.style.lineHeight)},set:function(t){this.updateStyle("lineHeight",t+"%")}},inLetterSpacing:{get:function(){return parseInt(this.style.letterSpacing)},set:function(t){this.updateStyle("letterSpacing",t+"px")}},inTextAlign:{get:function(){return this.style.textAlign},set:function(t){this.updateStyle("textAlign",t)}},inBackgroundColor:{get:function(){return this.style.backgroundColor},set:function(t){this.updateStyle("backgroundColor",t)}},inTextFormat:{get:function(){var t=[];return"bold"===this.style.fontWeight&&t.push("bold"),"italic"===this.style.fontStyle&&t.push("italic"),"line-through"===this.style.textDecoration&&t.push("line-through"),t},set:function(t){var e=t._operation,n=t._value,i="add"===e?n:"";"bold"===n?this.updateStyle("fontWeight",i):"italic"===n?this.updateStyle("fontStyle",i):"line-through"===n&&this.updateStyle("textDecoration",i)}}},methods:{}},h=d,f=(n("95c4"),n("cba8")),p=Object(f["a"])(h,c,l,!1,null,"6072e8ec",null),m=p.exports,g=n("4549"),v={components:{textControl:m},directives:{clickoutside:s["a"]},mixins:[a["f"].widgetMixin()],data:function(){return{isEditing:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(g["d"])(["canvasSize"])),{},{text:function(){return this.wState.text},textStyle:function(){return this.wState.style}}),watch:{isEditing:function(t){this.$emit("draggableChange",!t)}},created:function(){this.item.isCopied||this.updateDragInfo({w:160,h:50,x:(this.canvasSize.width-160)/2,y:200})},mounted:function(){var t=this;this.$dragRef.$el.addEventListener("dblclick",(function(){t.openEditing()}))},methods:Object(r["a"])(Object(r["a"])({},Object(g["a"])(["setWidgetConfig","updateWidgetState"])),{},{getMenuList:function(){return[]},openEditing:function(){var t=this;this.isEditing=!0,this.$nextTick((function(){var e=t.$refs.textContainer;if(e){var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i)}}))},saveText:function(t){var e=t||this.$refs.textContainer;this.isEditing=!1,console.log(e.innerHTML),this.updateWidgetState({keyPath:"text",value:e.innerHTML,widgetId:this.item.id}),console.log(this.text)}})},b=v,y=(n("9ec8"),Object(f["a"])(b,i,o,!1,null,"3450b178",null));e["default"]=y.exports},d686:function(t,e,n){},d8b7:function(t,e,n){},df7b:function(t,e,n){"use strict";n("8387")},e5ca:function(t,e,n){"use strict";n("c36a")},e667:function(t,e,n){},eb28:function(t,e,n){"use strict";n("695b")},eea9:function(t,e,n){"use strict";n("e667")},ef22:function(t,e,n){"use strict";n("8b99")}});